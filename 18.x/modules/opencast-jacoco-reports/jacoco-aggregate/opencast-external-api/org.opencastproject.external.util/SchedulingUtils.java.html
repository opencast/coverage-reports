<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>SchedulingUtils.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-external-api</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.external.util</a> &gt; <span class="el_source">SchedulingUtils.java</span></div><h1>SchedulingUtils.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */
package org.opencastproject.external.util;

import static com.entwinemedia.fn.data.json.Jsons.arr;
import static com.entwinemedia.fn.data.json.Jsons.f;
import static com.entwinemedia.fn.data.json.Jsons.obj;
import static com.entwinemedia.fn.data.json.Jsons.v;
import static java.time.ZoneOffset.UTC;
import static org.apache.commons.lang3.StringUtils.isBlank;
import static org.apache.commons.lang3.StringUtils.isNotBlank;

import org.opencastproject.capture.CaptureParameters;
import org.opencastproject.capture.admin.api.Agent;
import org.opencastproject.capture.admin.api.CaptureAgentStateService;
import org.opencastproject.elasticsearch.api.SearchIndexException;
import org.opencastproject.elasticsearch.index.ElasticsearchIndex;
import org.opencastproject.elasticsearch.index.objects.event.Event;
import org.opencastproject.index.service.api.IndexService;
import org.opencastproject.mediapackage.MediaPackage;
import org.opencastproject.scheduler.api.SchedulerException;
import org.opencastproject.scheduler.api.SchedulerService;
import org.opencastproject.scheduler.api.TechnicalMetadata;
import org.opencastproject.security.api.UnauthorizedException;
import org.opencastproject.util.NotFoundException;

import com.entwinemedia.fn.data.Opt;
import com.entwinemedia.fn.data.json.Field;
import com.entwinemedia.fn.data.json.JObject;
import com.entwinemedia.fn.data.json.JValue;

import net.fortuna.ical4j.model.property.RRule;

import org.apache.commons.lang3.StringUtils;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.time.Instant;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import java.util.TimeZone;

public final class SchedulingUtils {

  /** The logging facility */
<span class="nc" id="L70">  private static final Logger logger = LoggerFactory.getLogger(SchedulingUtils.class);</span>

  private static final String JSON_KEY_AGENT_ID = &quot;agent_id&quot;;
  private static final String JSON_KEY_START_DATE = &quot;start&quot;;
  private static final String JSON_KEY_END_DATE = &quot;end&quot;;
  private static final String JSON_KEY_DURATION = &quot;duration&quot;;
  private static final String JSON_KEY_INPUTS = &quot;inputs&quot;;
  private static final String JSON_KEY_RRULE = &quot;rrule&quot;;


  private SchedulingUtils() {
  }

  public static class SchedulingInfo {
<span class="pc" id="L84">    private Opt&lt;Date&gt; startDate = Opt.none();</span>
<span class="pc" id="L85">    private Opt&lt;Date&gt; endDate = Opt.none();</span>
<span class="pc" id="L86">    private Opt&lt;Long&gt; duration = Opt.none();</span>
<span class="pc" id="L87">    private Opt&lt;String&gt; agentId = Opt.none();</span>
<span class="pc" id="L88">    private Opt&lt;String&gt; inputs = Opt.none();</span>
<span class="pc" id="L89">    private Opt&lt;RRule&gt; rrule = Opt.none();</span>

<span class="fc" id="L91">    public SchedulingInfo() {</span>
<span class="fc" id="L92">    }</span>

    /**
     * Copy the given SchedulingInfo object.
     *
     * @param other
     *          The SchedulingInfo object to copy.
     */
<span class="nc" id="L100">    public SchedulingInfo(SchedulingInfo other) {</span>
<span class="nc" id="L101">      this.startDate = other.startDate;</span>
<span class="nc" id="L102">      this.endDate = other.endDate;</span>
<span class="nc" id="L103">      this.duration = other.duration;</span>
<span class="nc" id="L104">      this.agentId = other.agentId;</span>
<span class="nc" id="L105">      this.inputs = other.inputs;</span>
<span class="nc" id="L106">      this.rrule = other.rrule;</span>
<span class="nc" id="L107">    }</span>

    public Opt&lt;Date&gt; getStartDate() {
<span class="fc" id="L110">      return startDate;</span>
    }

    public void setStartDate(Opt&lt;Date&gt; startDate) {
<span class="fc" id="L114">      this.startDate = startDate;</span>
<span class="fc" id="L115">    }</span>

    public Opt&lt;Date&gt; getEndDate() {
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">      if (endDate.isSome()) {</span>
<span class="fc" id="L119">        return endDate;</span>
<span class="nc bnc" id="L120" title="All 4 branches missed.">      } else if (startDate.isSome() &amp;&amp; duration.isSome()) {</span>
<span class="nc" id="L121">        return Opt.some(Date.from(startDate.get().toInstant().plusMillis(duration.get())));</span>
      } else {
<span class="nc" id="L123">        return Opt.none();</span>
      }
    }

    public void setEndDate(Opt&lt;Date&gt; endDate) {
<span class="fc" id="L128">      this.endDate = endDate;</span>
<span class="fc" id="L129">    }</span>

    public Opt&lt;Long&gt; getDuration() {
<span class="nc bnc" id="L132" title="All 2 branches missed.">      if (duration.isSome()) {</span>
<span class="nc" id="L133">        return duration;</span>
<span class="nc bnc" id="L134" title="All 4 branches missed.">      } else if (startDate.isSome() &amp;&amp; endDate.isSome()) {</span>
<span class="nc" id="L135">        return Opt.some(endDate.get().getTime() - startDate.get().getTime());</span>
      } else {
<span class="nc" id="L137">        return Opt.none();</span>
      }
    }

    public void setDuration(Opt&lt;Long&gt; duration) {
<span class="nc" id="L142">      this.duration = duration;</span>
<span class="nc" id="L143">    }</span>

    public Opt&lt;String&gt; getAgentId() {
<span class="fc" id="L146">      return agentId;</span>
    }

    public void setAgentId(Opt&lt;String&gt; agentId) {
<span class="fc" id="L150">      this.agentId = agentId;</span>
<span class="fc" id="L151">    }</span>

    public Opt&lt;String&gt; getInputs() {
<span class="fc" id="L154">      return inputs;</span>
    }

    public void setInputs(Opt&lt;String&gt; inputs) {
<span class="fc" id="L158">      this.inputs = inputs;</span>
<span class="fc" id="L159">    }</span>

    public Opt&lt;RRule&gt; getRrule() {
<span class="nc" id="L162">      return rrule;</span>
    }

    public void setRrule(Opt&lt;RRule&gt; rrule) {
<span class="nc" id="L166">      this.rrule = rrule;</span>
<span class="nc" id="L167">    }</span>

    /**
     * @return A JSON representation of this ScheudlingInfo object.
     */
    public JObject toJson() {
<span class="fc" id="L173">      final List&lt;Field&gt; fields = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L174">      final DateTimeFormatter dateFormatter = DateTimeFormatter.ISO_DATE_TIME;</span>
<span class="pc bpc" id="L175" title="1 of 2 branches missed.">      if (startDate.isSome()) {</span>
<span class="fc" id="L176">        fields.add(f(JSON_KEY_START_DATE, dateFormatter.format(startDate.get().toInstant().atZone(UTC))));</span>
      }
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">      if (endDate.isSome()) {</span>
<span class="fc" id="L179">        fields.add(f(JSON_KEY_END_DATE, dateFormatter.format(endDate.get().toInstant().atZone(UTC))));</span>
      }
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">      if (agentId.isSome()) {</span>
<span class="fc" id="L182">        fields.add(f(JSON_KEY_AGENT_ID, agentId.get()));</span>
      }
<span class="pc bpc" id="L184" title="1 of 2 branches missed.">      if (inputs.isSome()) {</span>
<span class="fc" id="L185">        fields.add(f(JSON_KEY_INPUTS, arr(inputs.get().split(&quot;,&quot;))));</span>
      }
<span class="fc" id="L187">      return obj(fields);</span>
    }

    /**
     * @return A JSON source representation of this SchedulingInfo as needed by the IndexService to create an event.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public JSONObject toSource() {
<span class="nc" id="L195">      final JSONObject source = new JSONObject();</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">      if (rrule.isSome()) {</span>
<span class="nc" id="L197">        source.put(&quot;type&quot;, &quot;SCHEDULE_MULTIPLE&quot;);</span>
      } else {
<span class="nc" id="L199">        source.put(&quot;type&quot;, &quot;SCHEDULE_SINGLE&quot;);</span>
      }
<span class="nc" id="L201">      final JSONObject sourceMetadata = new JSONObject();</span>
<span class="nc" id="L202">      final DateTimeFormatter dateFormatter = DateTimeFormatter.ISO_DATE_TIME;</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">      if (startDate.isSome()) {</span>
<span class="nc" id="L204">        sourceMetadata.put(&quot;start&quot;, dateFormatter.format(startDate.get().toInstant().atZone(UTC)));</span>
      }
<span class="nc bnc" id="L206" title="All 2 branches missed.">      if (endDate.isSome()) {</span>
<span class="nc" id="L207">        sourceMetadata.put(&quot;end&quot;, dateFormatter.format(endDate.get().toInstant().atZone(UTC)));</span>
      }
<span class="nc bnc" id="L209" title="All 2 branches missed.">      if (agentId.isSome()) {</span>
<span class="nc" id="L210">        sourceMetadata.put(&quot;device&quot;, agentId.get());</span>
      }
<span class="nc bnc" id="L212" title="All 2 branches missed.">      if (getDuration().isSome()) {</span>
<span class="nc" id="L213">        sourceMetadata.put(&quot;duration&quot;, String.valueOf(getDuration().get()));</span>
      }
<span class="nc bnc" id="L215" title="All 2 branches missed.">      if (rrule.isSome()) {</span>
<span class="nc" id="L216">        sourceMetadata.put(&quot;rrule&quot;, rrule.get().getValue());</span>
      }
<span class="nc" id="L218">      sourceMetadata.put(&quot;inputs&quot;, inputs.getOr(&quot;&quot;));</span>

<span class="nc" id="L220">      source.put(&quot;metadata&quot;, sourceMetadata);</span>
<span class="nc" id="L221">      return source;</span>
    }

    /**
     * Creates a new SchedulingInfo of this instance which uses start date, end date, and agent id form the given
     * {@link TechnicalMetadata} if they are not present in this instance.
     *
     * @param metadata
     *          The {@link TechnicalMetadata} of which to use start date, end date, and agent id in case they are missing.
     *
     * @return The new SchedulingInfo with start date, end date, and agent id set.
     */
    public SchedulingInfo merge(TechnicalMetadata metadata) {
<span class="nc" id="L234">      SchedulingInfo result = new SchedulingInfo(this);</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">      if (result.startDate.isNone()) {</span>
<span class="nc" id="L236">        result.startDate = Opt.some(metadata.getStartDate());</span>
      }
<span class="nc bnc" id="L238" title="All 2 branches missed.">      if (result.endDate.isNone()) {</span>
<span class="nc" id="L239">        result.endDate = Opt.some(metadata.getEndDate());</span>
      }
<span class="nc bnc" id="L241" title="All 2 branches missed.">      if (result.agentId.isNone()) {</span>
<span class="nc" id="L242">        result.agentId = Opt.some(metadata.getAgentId());</span>
      }
<span class="nc" id="L244">      return result;</span>
    }

    /**
     * Parse the given json and create a new SchedulingInfo.
     *
     * @param json
     *          The JSONObject to parse.
     *
     * @return The SchedulingInfo instance represented by the given JSON.
     */
    public static SchedulingInfo of(JSONObject json) {
<span class="fc" id="L256">      final DateTimeFormatter dateFormatter = DateTimeFormatter.ISO_DATE_TIME;</span>
<span class="fc" id="L257">      final SchedulingInfo schedulingInfo = new SchedulingInfo();</span>
<span class="fc" id="L258">      final String startDate = (String) json.get(JSON_KEY_START_DATE);</span>
<span class="fc" id="L259">      final String endDate = (String) json.get(JSON_KEY_END_DATE);</span>
<span class="fc" id="L260">      final String agentId = (String) json.get(JSON_KEY_AGENT_ID);</span>
<span class="fc" id="L261">      final JSONArray inputs = (JSONArray) json.get(JSON_KEY_INPUTS);</span>
<span class="fc" id="L262">      final String rrule = (String) json.get(JSON_KEY_RRULE);</span>

      // Special handling because the original implementation required String but now we require long
<span class="fc" id="L265">      final String durationString = Objects.toString(json.get(JSON_KEY_DURATION), null);</span>

<span class="pc bpc" id="L267" title="1 of 2 branches missed.">      if (isNotBlank(startDate)) {</span>
<span class="fc" id="L268">        schedulingInfo.startDate = Opt.some(Date.from(Instant.from(dateFormatter.parse(startDate))));</span>
      }
<span class="pc bpc" id="L270" title="1 of 2 branches missed.">      if (isNotBlank(endDate)) {</span>
<span class="fc" id="L271">        schedulingInfo.endDate = Opt.some(Date.from(Instant.from(dateFormatter.parse(endDate))));</span>
      }
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">      if (isNotBlank(agentId)) {</span>
<span class="fc" id="L274">        schedulingInfo.agentId = Opt.some(agentId);</span>
      }
<span class="pc bpc" id="L276" title="1 of 2 branches missed.">      if (isNotBlank(durationString)) {</span>
        try {
<span class="nc" id="L278">          schedulingInfo.duration = Opt.some(Long.parseLong(durationString));</span>
<span class="nc" id="L279">        } catch (Exception e) {</span>
<span class="nc" id="L280">          throw new IllegalArgumentException(&quot;Invalid format of field 'duration'&quot;);</span>
<span class="nc" id="L281">        }</span>
      }

<span class="pc bpc" id="L284" title="3 of 4 branches missed.">      if (isBlank(endDate) &amp;&amp; isBlank(durationString)) {</span>
<span class="nc" id="L285">        throw new IllegalArgumentException(&quot;Either 'end' or 'duration' must be specified&quot;);</span>
      }

<span class="pc bpc" id="L288" title="1 of 2 branches missed.">      if (inputs != null) {</span>
<span class="fc" id="L289">        schedulingInfo.inputs = Opt.some(String.join(&quot;,&quot;, inputs));</span>
      }
<span class="pc bpc" id="L291" title="1 of 2 branches missed.">      if (isNotBlank(rrule)) {</span>
        try {
<span class="nc" id="L293">          RRule parsedRrule = new RRule(rrule);</span>
<span class="nc" id="L294">          parsedRrule.validate();</span>
<span class="nc" id="L295">          schedulingInfo.rrule = Opt.some(parsedRrule);</span>
<span class="nc" id="L296">        } catch (Exception e) {</span>
<span class="nc" id="L297">          throw new IllegalArgumentException(&quot;Invalid RRule: &quot; + rrule);</span>
<span class="nc" id="L298">        }</span>
<span class="nc bnc" id="L299" title="All 6 branches missed.">        if (isBlank(durationString) || isBlank(startDate) || isBlank(endDate)) {</span>
<span class="nc" id="L300">          throw new IllegalArgumentException(&quot;'start', 'end' and 'duration' must be specified when 'rrule' is specified&quot;);</span>
        }
      }
<span class="fc" id="L303">      return schedulingInfo;</span>
    }

    /**
     * Get the SchedulingInfo for the given event id.
     *
     * @param eventId
     *          The id of the event to get the SchedulingInfo for.
     * @param schedulerService
     *          The {@link SchedulerService} to query for the event id.
     *
     * @return The SchedulingInfo for the given event id.
     *
     * @throws UnauthorizedException
     *          If the {@link SchedulerService} cannot be queried due to missing authorization.
     * @throws SchedulerException
     *          In case internal errors occur within the {@link SchedulerService}.
     */
    public static SchedulingInfo of(String eventId, SchedulerService schedulerService)
        throws UnauthorizedException, SchedulerException {
<span class="fc" id="L323">      final SchedulingInfo result = new SchedulingInfo();</span>
      try {
<span class="fc" id="L325">        final TechnicalMetadata technicalMetadata = schedulerService.getTechnicalMetadata(eventId);</span>
<span class="fc" id="L326">        result.startDate = Opt.some(technicalMetadata.getStartDate());</span>
<span class="fc" id="L327">        result.endDate = Opt.some(technicalMetadata.getEndDate());</span>
<span class="fc" id="L328">        result.agentId = Opt.some(technicalMetadata.getAgentId());</span>
<span class="fc" id="L329">        String inputs = technicalMetadata.getCaptureAgentConfiguration().get(CaptureParameters.CAPTURE_DEVICE_NAMES);</span>
<span class="pc bpc" id="L330" title="1 of 2 branches missed.">        if (isNotBlank(inputs)) {</span>
<span class="fc" id="L331">          result.inputs = Opt.some(inputs);</span>
        }
<span class="fc" id="L333">        return result;</span>
<span class="nc" id="L334">      } catch (NotFoundException e) {</span>
<span class="nc" id="L335">        return result;</span>
      }
    }
  }

  /**
   * Convert the given list of {@link MediaPackage} elements to a JSON used to tell which events are causing conflicts.
   *
   * @param checkedEventId
   *          The id of the event which was checked for conflicts. May be empty if an rrule was checked.
   * @param mediaPackages
   *          The conflicting {@link MediaPackage}s.
   * @param indexService
   *          The {@link IndexService} for getting the corresponding events for the conflicting {@link MediaPackage}s.
   * @param elasticsearchIndex
   *          The index to use for getting the corresponding events for the conflicting MediaPackages.
   *
   * @return A List of conflicting events, represented as JSON objects.
   *
   * @throws SearchIndexException
   *          If an event cannot be found.
   */
  public static List&lt;JValue&gt; convertConflictingEvents(
      Optional&lt;String&gt; checkedEventId,
      List&lt;MediaPackage&gt; mediaPackages,
      IndexService indexService,
      ElasticsearchIndex elasticsearchIndex
  ) throws SearchIndexException {
<span class="nc" id="L363">    final List&lt;JValue&gt; result = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L364" title="All 2 branches missed.">    for (MediaPackage mediaPackage : mediaPackages) {</span>
<span class="nc" id="L365">      final Opt&lt;Event&gt; eventOpt = indexService.getEvent(mediaPackage.getIdentifier().toString(), elasticsearchIndex);</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">      if (eventOpt.isSome()) {</span>
<span class="nc" id="L367">        final Event event = eventOpt.get();</span>
<span class="nc bnc" id="L368" title="All 4 branches missed.">        if (checkedEventId.isPresent() &amp;&amp; checkedEventId.equals(event.getIdentifier())) {</span>
<span class="nc" id="L369">          continue;</span>
        }
<span class="nc" id="L371">        result.add(obj(f(&quot;start&quot;, v(event.getTechnicalStartTime())), f(&quot;end&quot;, v(event.getTechnicalEndTime())),</span>
<span class="nc" id="L372">            f(&quot;title&quot;, v(event.getTitle()))));</span>
<span class="nc" id="L373">      } else {</span>
<span class="nc" id="L374">        logger.warn(&quot;Index out of sync! Conflicting event catalog {} not found on event index!&quot;,</span>
<span class="nc" id="L375">            mediaPackage.getIdentifier().toString());</span>
      }
<span class="nc" id="L377">    }</span>
<span class="nc" id="L378">    return result;</span>
  }

  /**
   * Get the conflicting events for the given SchedulingInfo.
   *
   * @param schedulingInfo
   *          The SchedulingInfo to check for conflicts.
   * @param agentStateService
   *          The {@link CaptureAgentStateService} to use for retrieving capture agents.
   * @param schedulerService
   *          The {@link SchedulerService} to use for conflict checking.
   * @return
   *          A list of {@link MediaPackage} elements which cause conflicts with the given SchedulingInfo.
   *
   * @throws NotFoundException
   *          If the capture agent cannot be found.
   * @throws UnauthorizedException
   *          If the {@link SchedulerService} cannot be queried due to missing authorization.
   * @throws SchedulerException
   *          In case internal errors occur within the {@link SchedulerService}.
   */
  public static List&lt;MediaPackage&gt; getConflictingEvents(
      SchedulingInfo schedulingInfo,
      CaptureAgentStateService agentStateService,
      SchedulerService schedulerService
  ) throws NotFoundException, UnauthorizedException, SchedulerException {

<span class="nc bnc" id="L406" title="All 2 branches missed.">    if (schedulingInfo.getRrule().isSome()) {</span>
<span class="nc" id="L407">      final Agent agent = agentStateService.getAgent(schedulingInfo.getAgentId().get());</span>
<span class="nc" id="L408">      String timezone = agent.getConfiguration().getProperty(&quot;capture.device.timezone&quot;);</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">      if (StringUtils.isBlank(timezone)) {</span>
<span class="nc" id="L410">        timezone = TimeZone.getDefault().getID();</span>
<span class="nc" id="L411">        logger.warn(&quot;No 'capture.device.timezone' set on agent {}. The default server timezone {} will be used.&quot;,</span>
<span class="nc" id="L412">            schedulingInfo.getAgentId().get(), timezone);</span>
      }
<span class="nc" id="L414">      return schedulerService.findConflictingEvents(</span>
<span class="nc" id="L415">          schedulingInfo.getAgentId().get(),</span>
<span class="nc" id="L416">          schedulingInfo.getRrule().get(),</span>
<span class="nc" id="L417">          schedulingInfo.getStartDate().get(),</span>
<span class="nc" id="L418">          schedulingInfo.getEndDate().get(),</span>
<span class="nc" id="L419">          schedulingInfo.getDuration().get(),</span>
<span class="nc" id="L420">          TimeZone.getTimeZone(timezone)</span>
      );
    }

<span class="nc" id="L424">    return schedulerService.findConflictingEvents(</span>
<span class="nc" id="L425">        schedulingInfo.getAgentId().get(),</span>
<span class="nc" id="L426">        schedulingInfo.getStartDate().get(),</span>
<span class="nc" id="L427">        schedulingInfo.getEndDate().get()</span>
    );
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>