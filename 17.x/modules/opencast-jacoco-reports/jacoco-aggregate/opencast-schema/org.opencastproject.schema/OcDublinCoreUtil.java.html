<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>OcDublinCoreUtil.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-schema</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.schema</a> &gt; <span class="el_source">OcDublinCoreUtil.java</span></div><h1>OcDublinCoreUtil.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */

package org.opencastproject.schema;

import org.opencastproject.metadata.dublincore.DublinCore;
import org.opencastproject.metadata.dublincore.DublinCoreCatalog;
import org.opencastproject.metadata.dublincore.DublinCoreValue;
import org.opencastproject.metadata.dublincore.DublinCores;
import org.opencastproject.metadata.dublincore.EncodingSchemeUtils;
import org.opencastproject.metadata.dublincore.Precision;
import org.opencastproject.util.data.Function;

import java.util.Date;

/** Constructor, converter and encoder functions for {@link org.opencastproject.schema.OcDublinCore}. */
public final class OcDublinCoreUtil {
  private OcDublinCoreUtil() {
  }

  public static DublinCoreValue encodeCreated(Date a) {
<span class="fc" id="L40">    return EncodingSchemeUtils.encodeDate(a, Precision.Second);</span>
  }

  public static DublinCoreValue encodeDate(Date a) {
<span class="fc" id="L44">    return EncodingSchemeUtils.encodeDate(a, Precision.Second);</span>
  }

<span class="fc" id="L47">  public static final Function&lt;Date, DublinCoreValue&gt; encodeDate = new Function&lt;Date, DublinCoreValue&gt;() {</span>
    @Override public DublinCoreValue apply(Date a) {
<span class="fc" id="L49">      return encodeDate(a);</span>
    }
  };

  public static DublinCoreValue encodeDateAccepted(Date a) {
<span class="fc" id="L54">    return EncodingSchemeUtils.encodeDate(a, Precision.Second);</span>
  }

<span class="fc" id="L57">  public static final Function&lt;Date, DublinCoreValue&gt; encodeDateAccepted = new Function&lt;Date, DublinCoreValue&gt;() {</span>
    @Override public DublinCoreValue apply(Date a) {
<span class="fc" id="L59">      return encodeDateAccepted(a);</span>
    }
  };

  public static DublinCoreValue encodeDateCopyrighted(Date a) {
<span class="fc" id="L64">    return EncodingSchemeUtils.encodeDate(a, Precision.Second);</span>
  }

<span class="fc" id="L67">  public static final Function&lt;Date, DublinCoreValue&gt; encodeDateCopyrighted = new Function&lt;Date, DublinCoreValue&gt;() {</span>
    @Override public DublinCoreValue apply(Date a) {
<span class="fc" id="L69">      return encodeDateCopyrighted(a);</span>
    }
  };

  public static DublinCoreValue encodeDateSubmitted(Date a) {
<span class="fc" id="L74">    return EncodingSchemeUtils.encodeDate(a, Precision.Second);</span>
  }

<span class="fc" id="L77">  public static final Function&lt;Date, DublinCoreValue&gt; encodeDateSubmitted = new Function&lt;Date, DublinCoreValue&gt;() {</span>
    @Override public DublinCoreValue apply(Date a) {
<span class="fc" id="L79">      return encodeDateSubmitted(a);</span>
    }
  };

  public static DublinCoreValue encodeExtent(Long a) {
<span class="fc" id="L84">    return DublinCoreValue.mk(a.toString());</span>
  }

  /**
   * Create a generic DublinCoreCatalog from an OcDublinCore.
   * Fields are encoded according to the Opencast rules. This class provides functions for each DublinCore
   * property that needs special encoding.
   */
  public static DublinCoreCatalog toCatalog(final OcDublinCore source) {
    // completeness assured by unit test
<span class="fc" id="L94">    final DublinCoreCatalog target = DublinCores.mkOpencastEpisode().getCatalog();</span>
<span class="fc bfc" id="L95" title="All 2 branches covered.">    for (String a : source.getAbstract()) target.set(DublinCore.PROPERTY_ABSTRACT, a);</span>
<span class="fc bfc" id="L96" title="All 2 branches covered.">    for (String a : source.getAccessRights()) target.set(DublinCore.PROPERTY_ACCESS_RIGHTS, a);</span>
<span class="fc bfc" id="L97" title="All 2 branches covered.">    for (String a : source.getAccrualMethod()) target.set(DublinCore.PROPERTY_ACCRUAL_METHOD, a);</span>
<span class="fc bfc" id="L98" title="All 2 branches covered.">    for (String a : source.getAccrualPeriodicity()) target.set(DublinCore.PROPERTY_ACCRUAL_PERIODICITY, a);</span>
<span class="fc bfc" id="L99" title="All 2 branches covered.">    for (String a : source.getAccrualPolicy()) target.set(DublinCore.PROPERTY_ACCRUAL_POLICY, a);</span>
<span class="fc bfc" id="L100" title="All 2 branches covered.">    for (String a : source.getAlternative()) target.set(DublinCore.PROPERTY_ALTERNATIVE, a);</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">    for (String a : source.getAudience()) target.set(DublinCore.PROPERTY_AUDIENCE, a);</span>
<span class="fc bfc" id="L102" title="All 2 branches covered.">    for (String a : source.getAvailable()) target.set(DublinCore.PROPERTY_AVAILABLE, a);</span>
<span class="fc bfc" id="L103" title="All 2 branches covered.">    for (String a : source.getBibliographicCitation()) target.set(DublinCore.PROPERTY_BIBLIOGRAPHIC_CITATION, a);</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">    for (String a : source.getConformsTo()) target.set(DublinCore.PROPERTY_CONFORMS_TO, a);</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">    for (String a : source.getContributor()) target.set(DublinCore.PROPERTY_CONTRIBUTOR, a);</span>
<span class="fc bfc" id="L106" title="All 2 branches covered.">    for (String a : source.getCoverage()) target.set(DublinCore.PROPERTY_COVERAGE, a);</span>
<span class="fc" id="L107">    target.set(DublinCore.PROPERTY_CREATED, encodeCreated(source.getCreated()));</span>
<span class="fc bfc" id="L108" title="All 2 branches covered.">    for (String a : source.getCreator()) target.set(DublinCore.PROPERTY_CREATOR, a);</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">    for (Date a : source.getDate()) target.set(DublinCore.PROPERTY_DATE, encodeDate(a));</span>
<span class="fc bfc" id="L110" title="All 2 branches covered.">    for (Date a : source.getDateAccepted()) target.set(DublinCore.PROPERTY_DATE_ACCEPTED, encodeDateAccepted(a));</span>
<span class="fc bfc" id="L111" title="All 2 branches covered.">    for (Date a : source.getDateCopyrighted())</span>
<span class="fc" id="L112">      target.set(DublinCore.PROPERTY_DATE_COPYRIGHTED, encodeDateCopyrighted(a));</span>
<span class="fc bfc" id="L113" title="All 2 branches covered.">    for (Date a : source.getDateSubmitted()) target.set(DublinCore.PROPERTY_DATE_SUBMITTED, encodeDateSubmitted(a));</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">    for (String a : source.getDescription()) target.set(DublinCore.PROPERTY_DESCRIPTION, a);</span>
<span class="fc bfc" id="L115" title="All 2 branches covered.">    for (String a : source.getEducationLevel()) target.set(DublinCore.PROPERTY_EDUCATION_LEVEL, a);</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">    for (Long a : source.getExtent()) target.set(DublinCore.PROPERTY_EXTENT, encodeExtent(a));</span>
<span class="fc bfc" id="L117" title="All 2 branches covered.">    for (String a : source.getFormat()) target.set(DublinCore.PROPERTY_FORMAT, a);</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">    for (String a : source.getHasFormat()) target.set(DublinCore.PROPERTY_HAS_FORMAT, a);</span>
<span class="fc bfc" id="L119" title="All 2 branches covered.">    for (String a : source.getHasPart()) target.set(DublinCore.PROPERTY_HAS_PART, a);</span>
<span class="fc bfc" id="L120" title="All 2 branches covered.">    for (String a : source.getHasVersion()) target.set(DublinCore.PROPERTY_HAS_VERSION, a);</span>
<span class="fc bfc" id="L121" title="All 2 branches covered.">    for (String a : source.getIdentifier()) target.set(DublinCore.PROPERTY_IDENTIFIER, a);</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">    for (String a : source.getInstructionalMethod()) target.set(DublinCore.PROPERTY_INSTRUCTIONAL_METHOD, a);</span>
<span class="fc bfc" id="L123" title="All 2 branches covered.">    for (String a : source.getIsFormatOf()) target.set(DublinCore.PROPERTY_IS_FORMAT_OF, a);</span>
<span class="fc bfc" id="L124" title="All 2 branches covered.">    for (String a : source.getIsPartOf()) target.set(DublinCore.PROPERTY_IS_PART_OF, a);</span>
<span class="fc bfc" id="L125" title="All 2 branches covered.">    for (String a : source.getIsReferencedBy()) target.set(DublinCore.PROPERTY_IS_REFERENCED_BY, a);</span>
<span class="fc bfc" id="L126" title="All 2 branches covered.">    for (String a : source.getIsReplacedBy()) target.set(DublinCore.PROPERTY_IS_REPLACED_BY, a);</span>
<span class="fc bfc" id="L127" title="All 2 branches covered.">    for (String a : source.getIsRequiredBy()) target.set(DublinCore.PROPERTY_IS_REQUIRED_BY, a);</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">    for (String a : source.getIssued()) target.set(DublinCore.PROPERTY_ISSUED, a);</span>
<span class="fc bfc" id="L129" title="All 2 branches covered.">    for (String a : source.getIsVersionOf()) target.set(DublinCore.PROPERTY_IS_VERSION_OF, a);</span>
<span class="fc bfc" id="L130" title="All 2 branches covered.">    for (String a : source.getLanguage()) target.set(DublinCore.PROPERTY_LANGUAGE, a);</span>
<span class="fc bfc" id="L131" title="All 2 branches covered.">    for (String a : source.getLicense()) target.set(DublinCore.PROPERTY_LICENSE, a);</span>
<span class="fc bfc" id="L132" title="All 2 branches covered.">    for (String a : source.getMediator()) target.set(DublinCore.PROPERTY_MEDIATOR, a);</span>
<span class="fc bfc" id="L133" title="All 2 branches covered.">    for (String a : source.getMedium()) target.set(DublinCore.PROPERTY_MEDIUM, a);</span>
<span class="fc bfc" id="L134" title="All 2 branches covered.">    for (String a : source.getModified()) target.set(DublinCore.PROPERTY_MODIFIED, a);</span>
<span class="fc bfc" id="L135" title="All 2 branches covered.">    for (String a : source.getProvenance()) target.set(DublinCore.PROPERTY_PROVENANCE, a);</span>
<span class="fc bfc" id="L136" title="All 2 branches covered.">    for (String a : source.getPublisher()) target.set(DublinCore.PROPERTY_PUBLISHER, a);</span>
<span class="fc bfc" id="L137" title="All 2 branches covered.">    for (String a : source.getReferences()) target.set(DublinCore.PROPERTY_REFERENCES, a);</span>
<span class="fc bfc" id="L138" title="All 2 branches covered.">    for (String a : source.getRelation()) target.set(DublinCore.PROPERTY_RELATION, a);</span>
<span class="fc bfc" id="L139" title="All 2 branches covered.">    for (String a : source.getReplaces()) target.set(DublinCore.PROPERTY_REPLACES, a);</span>
<span class="fc bfc" id="L140" title="All 2 branches covered.">    for (String a : source.getRequires()) target.set(DublinCore.PROPERTY_REQUIRES, a);</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">    for (String a : source.getRights()) target.set(DublinCore.PROPERTY_RIGHTS, a);</span>
<span class="fc bfc" id="L142" title="All 2 branches covered.">    for (String a : source.getRightsHolder()) target.set(DublinCore.PROPERTY_RIGHTS_HOLDER, a);</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">    for (String a : source.getSource()) target.set(DublinCore.PROPERTY_SOURCE, a);</span>
<span class="fc bfc" id="L144" title="All 2 branches covered.">    for (String a : source.getSpatial()) target.set(DublinCore.PROPERTY_SPATIAL, a);</span>
<span class="fc bfc" id="L145" title="All 2 branches covered.">    for (String a : source.getSubject()) target.set(DublinCore.PROPERTY_SUBJECT, a);</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">    for (String a : source.getTableOfContents()) target.set(DublinCore.PROPERTY_TABLE_OF_CONTENTS, a);</span>
<span class="fc bfc" id="L147" title="All 2 branches covered.">    for (String a : source.getTemporal()) target.set(DublinCore.PROPERTY_TEMPORAL, a);</span>
<span class="fc" id="L148">    target.set(DublinCore.PROPERTY_TITLE, source.getTitle());</span>
<span class="fc bfc" id="L149" title="All 2 branches covered.">    for (String a : source.getType()) target.set(DublinCore.PROPERTY_TYPE, a);</span>
<span class="fc bfc" id="L150" title="All 2 branches covered.">    for (String a : source.getValid()) target.set(DublinCore.PROPERTY_VALID, a);</span>
<span class="fc" id="L151">    return target;</span>
  }

  /** Create a JAXB transfer object from an OcDublinCore. */
  public static JaxbOcDublinCore toJaxb(final OcDublinCore source) {
    // completeness assured by unit test
<span class="fc" id="L157">    final JaxbOcDublinCore target = new JaxbOcDublinCore();</span>
<span class="fc" id="L158">    target.abstrakt = source.getAbstract().getOrElseNull();</span>
<span class="fc" id="L159">    target.accessRights = source.getAccessRights().getOrElseNull();</span>
<span class="fc" id="L160">    target.accrualMethod = source.getAccrualMethod().getOrElseNull();</span>
<span class="fc" id="L161">    target.accrualPeriodicity = source.getAccrualPeriodicity().getOrElseNull();</span>
<span class="fc" id="L162">    target.accrualPolicy = source.getAccrualPolicy().getOrElseNull();</span>
<span class="fc" id="L163">    target.alternative = source.getAlternative().getOrElseNull();</span>
<span class="fc" id="L164">    target.audience = source.getAudience().getOrElseNull();</span>
<span class="fc" id="L165">    target.available = source.getAvailable().getOrElseNull();</span>
<span class="fc" id="L166">    target.bibliographicCitation = source.getBibliographicCitation().getOrElseNull();</span>
<span class="fc" id="L167">    target.conformsTo = source.getConformsTo().getOrElseNull();</span>
<span class="fc" id="L168">    target.contributor = source.getContributor().getOrElseNull();</span>
<span class="fc" id="L169">    target.coverage = source.getCoverage().getOrElseNull();</span>
<span class="fc" id="L170">    target.created = source.getCreated();</span>
<span class="fc" id="L171">    target.creator = source.getCreator().getOrElseNull();</span>
<span class="fc" id="L172">    target.date = source.getDate().getOrElseNull();</span>
<span class="fc" id="L173">    target.dateAccepted = source.getDateAccepted().getOrElseNull();</span>
<span class="fc" id="L174">    target.dateCopyrighted = source.getDateCopyrighted().getOrElseNull();</span>
<span class="fc" id="L175">    target.dateSubmitted = source.getDateSubmitted().getOrElseNull();</span>
<span class="fc" id="L176">    target.description = source.getDescription().getOrElseNull();</span>
<span class="fc" id="L177">    target.educationLevel = source.getEducationLevel().getOrElseNull();</span>
<span class="fc" id="L178">    target.extent = source.getExtent().getOrElseNull();</span>
<span class="fc" id="L179">    target.format = source.getFormat().getOrElseNull();</span>
<span class="fc" id="L180">    target.hasFormat = source.getHasFormat().getOrElseNull();</span>
<span class="fc" id="L181">    target.hasPart = source.getHasPart().getOrElseNull();</span>
<span class="fc" id="L182">    target.hasVersion = source.getHasVersion().getOrElseNull();</span>
<span class="fc" id="L183">    target.identifier = source.getIdentifier().getOrElseNull();</span>
<span class="fc" id="L184">    target.instructionalMethod = source.getInstructionalMethod().getOrElseNull();</span>
<span class="fc" id="L185">    target.isFormatOf = source.getIsFormatOf().getOrElseNull();</span>
<span class="fc" id="L186">    target.isPartOf = source.getIsPartOf().getOrElseNull();</span>
<span class="fc" id="L187">    target.isReferencedBy = source.getIsReferencedBy().getOrElseNull();</span>
<span class="fc" id="L188">    target.isReplacedBy = source.getIsReplacedBy().getOrElseNull();</span>
<span class="fc" id="L189">    target.isRequiredBy = source.getIsRequiredBy().getOrElseNull();</span>
<span class="fc" id="L190">    target.issued = source.getIssued().getOrElseNull();</span>
<span class="fc" id="L191">    target.isVersionOf = source.getIsVersionOf().getOrElseNull();</span>
<span class="fc" id="L192">    target.language = source.getLanguage().getOrElseNull();</span>
<span class="fc" id="L193">    target.license = source.getLicense().getOrElseNull();</span>
<span class="fc" id="L194">    target.mediator = source.getMediator().getOrElseNull();</span>
<span class="fc" id="L195">    target.medium = source.getMedium().getOrElseNull();</span>
<span class="fc" id="L196">    target.modified = source.getModified().getOrElseNull();</span>
<span class="fc" id="L197">    target.provenance = source.getProvenance().getOrElseNull();</span>
<span class="fc" id="L198">    target.publisher = source.getPublisher().getOrElseNull();</span>
<span class="fc" id="L199">    target.references = source.getReferences().getOrElseNull();</span>
<span class="fc" id="L200">    target.relation = source.getRelation().getOrElseNull();</span>
<span class="fc" id="L201">    target.replaces = source.getReplaces().getOrElseNull();</span>
<span class="fc" id="L202">    target.requires = source.getRequires().getOrElseNull();</span>
<span class="fc" id="L203">    target.rights = source.getRights().getOrElseNull();</span>
<span class="fc" id="L204">    target.rightsHolder = source.getRightsHolder().getOrElseNull();</span>
<span class="fc" id="L205">    target.source = source.getSource().getOrElseNull();</span>
<span class="fc" id="L206">    target.spatial = source.getSpatial().getOrElseNull();</span>
<span class="fc" id="L207">    target.subject = source.getSubject().getOrElseNull();</span>
<span class="fc" id="L208">    target.tableOfContents = source.getTableOfContents().getOrElseNull();</span>
<span class="fc" id="L209">    target.temporal = source.getTemporal().getOrElseNull();</span>
<span class="fc" id="L210">    target.title = source.getTitle();</span>
<span class="fc" id="L211">    target.type = source.getType().getOrElseNull();</span>
<span class="fc" id="L212">    target.valid = source.getValid().getOrElseNull();</span>
<span class="fc" id="L213">    return target;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>