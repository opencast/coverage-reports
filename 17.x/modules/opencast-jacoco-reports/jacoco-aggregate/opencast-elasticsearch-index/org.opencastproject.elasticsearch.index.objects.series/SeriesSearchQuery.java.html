<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>SeriesSearchQuery.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-elasticsearch-index</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.elasticsearch.index.objects.series</a> &gt; <span class="el_source">SeriesSearchQuery.java</span></div><h1>SeriesSearchQuery.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */
package org.opencastproject.elasticsearch.index.objects.series;

import static org.opencastproject.security.api.SecurityConstants.GLOBAL_ADMIN_ROLE;

import org.opencastproject.elasticsearch.api.SearchTerms;
import org.opencastproject.elasticsearch.impl.AbstractSearchQuery;
import org.opencastproject.elasticsearch.impl.IndexSchema;
import org.opencastproject.security.api.Permissions;
import org.opencastproject.security.api.Permissions.Action;
import org.opencastproject.security.api.User;
import org.opencastproject.util.requests.SortCriterion.Order;

import org.apache.commons.lang3.StringUtils;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;

/**
 * This interface defines a fluent api for a query object used to lookup series in the search index.
 */
public class SeriesSearchQuery extends AbstractSearchQuery {

<span class="pc" id="L47">  protected List&lt;String&gt; identifiers = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L48">  private String title = null;</span>
<span class="pc" id="L49">  private User user = null;</span>
<span class="pc" id="L50">  private String description = null;</span>
<span class="pc" id="L51">  private final Set&lt;String&gt; actions = new HashSet&lt;String&gt;();</span>
<span class="pc" id="L52">  private final List&lt;String&gt; subjects = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L53">  private String organization = null;</span>
<span class="pc" id="L54">  private String language = null;</span>
<span class="pc" id="L55">  private String creator = null;</span>
<span class="pc" id="L56">  private String license = null;</span>
<span class="pc" id="L57">  private String accessPolicy = null;</span>
<span class="pc" id="L58">  private String managedAcl = null;</span>
<span class="pc" id="L59">  private final List&lt;String&gt; organizers = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L60">  private final List&lt;String&gt; contributors = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L61">  private final List&lt;String&gt; publishers = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L62">  private Date createdFrom = null;</span>
<span class="pc" id="L63">  private Date createdTo = null;</span>
<span class="pc" id="L64">  private boolean editOnly = false;</span>
<span class="pc" id="L65">  private String rightsHolder = null;</span>
<span class="pc" id="L66">  private Long theme = null;</span>

<span class="fc" id="L68">  private static final Map&lt;String, String&gt; SORT_FIELDS = Map.of(</span>
<span class="fc" id="L69">      SeriesIndexSchema.TITLE, SeriesIndexSchema.TITLE.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L70">      SeriesIndexSchema.DESCRIPTION, SeriesIndexSchema.DESCRIPTION.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L71">      SeriesIndexSchema.SUBJECT, SeriesIndexSchema.SUBJECT.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L72">      SeriesIndexSchema.CREATOR, SeriesIndexSchema.CREATOR.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L73">      SeriesIndexSchema.ORGANIZERS, SeriesIndexSchema.ORGANIZERS.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L74">      SeriesIndexSchema.CONTRIBUTORS, SeriesIndexSchema.CONTRIBUTORS.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L75">      SeriesIndexSchema.PUBLISHERS, SeriesIndexSchema.PUBLISHERS.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION),</span>
<span class="fc" id="L76">      SeriesIndexSchema.RIGHTS_HOLDER, SeriesIndexSchema.RIGHTS_HOLDER.concat(IndexSchema.SORT_FIELD_NAME_EXTENSION)</span>
  );

  @SuppressWarnings(&quot;unused&quot;)
<span class="nc" id="L80">  private SeriesSearchQuery() {</span>
<span class="nc" id="L81">  }</span>

  @Override
  protected String sortOrderFieldName(String field) {
<span class="fc bfc" id="L85" title="All 2 branches covered.">    if (SORT_FIELDS.containsKey(field)) {</span>
<span class="fc" id="L86">      return SORT_FIELDS.get(field);</span>
    }
<span class="fc" id="L88">    return field;</span>
  }

  /**
   * Creates a query that will return series documents.
   */
  public SeriesSearchQuery(String organization, User user) {
<span class="fc" id="L95">    super(Series.DOCUMENT_TYPE);</span>
<span class="fc" id="L96">    this.organization = organization;</span>
<span class="fc" id="L97">    this.user = user;</span>
<span class="fc" id="L98">    this.actions.add(Permissions.Action.READ.toString());</span>
<span class="fc bfc" id="L99" title="All 2 branches covered.">    if (!user.hasRole(GLOBAL_ADMIN_ROLE)) {</span>
<span class="pc bpc" id="L100" title="1 of 2 branches missed.">      if (!user.getOrganization().getId().equals(organization)) {</span>
<span class="nc" id="L101">        throw new IllegalStateException(&quot;User's organization must match search organization&quot;);</span>
      }
    }
<span class="fc" id="L104">  }</span>

  /**
   * Selects series with the given identifier.
   * &lt;p&gt;
   * Note that this method may be called multiple times to support selection of multiple series.
   *
   * @param id
   *          the series identifier
   * @return the enhanced search query
   */
  public SeriesSearchQuery withIdentifier(String id) {
<span class="pc bpc" id="L116" title="1 of 2 branches missed.">    if (StringUtils.isBlank(id)) {</span>
<span class="nc" id="L117">      throw new IllegalArgumentException(&quot;Identifier cannot be null&quot;);</span>
    }
<span class="fc" id="L119">    this.identifiers.add(id);</span>
<span class="fc" id="L120">    return this;</span>
  }

  /**
   * Returns the list of series identifiers or an empty array if no identifiers have been specified.
   *
   * @return the identifiers
   */
  public String[] getIdentifier() {
<span class="fc" id="L129">    return identifiers.toArray(new String[identifiers.size()]);</span>
  }

  /**
   * Selects series with the given title.
   *
   * @param title
   *          the title
   * @return the enhanced search query
   */
  public SeriesSearchQuery withTitle(String title) {
<span class="nc" id="L140">    this.title = title;</span>
<span class="nc" id="L141">    return this;</span>
  }

  /**
   * Returns the title of the series.
   *
   * @return the title
   */
  public String getTitle() {
<span class="nc" id="L150">    return title;</span>
  }

  /**
   * Filter the series without any action checked.
   *
   * @return the enhanced search query
   */
  public SeriesSearchQuery withoutActions() {
<span class="fc" id="L159">    this.actions.clear();</span>
<span class="fc" id="L160">    return this;</span>
  }

  /**
   * Filter the series with the given action.
   * &lt;p&gt;
   * Note that this method may be called multiple times to support filtering by multiple actions.
   *
   * @param action
   *          the action
   * @return the enhanced search query
   */
  public SeriesSearchQuery withAction(Action action) {
<span class="nc bnc" id="L173" title="All 2 branches missed.">    if (action == null) {</span>
<span class="nc" id="L174">      throw new IllegalArgumentException(&quot;Action cannot be null&quot;);</span>
    }
<span class="nc" id="L176">    this.actions.add(action.toString());</span>
<span class="nc" id="L177">    return this;</span>
  }

  /**
   * Returns the list of actions or an empty array if no actions have been specified.
   *
   * @return the actions
   */
  public String[] getActions() {
<span class="nc" id="L186">    return actions.toArray(new String[actions.size()]);</span>
  }

  /**
   * Selects series with the given description.
   *
   * @param description
   *          the description
   * @return the enhanced search query
   */
  public SeriesSearchQuery withDescription(String description) {
<span class="nc" id="L197">    this.description = description;</span>
<span class="nc" id="L198">    return this;</span>
  }

  /**
   * Returns the description of the series.
   *
   * @return the description
   */
  public String getDescription() {
<span class="nc" id="L207">    return description;</span>
  }

  /**
   * Selects series with the given subject.
   * &lt;p&gt;
   * Note that this method may be called multiple times to support selection of multiple series.
   *
   * @param subject
   *          the subject
   * @return the enhanced search query
   */
  public SeriesSearchQuery withSubject(String subject) {
<span class="nc bnc" id="L220" title="All 2 branches missed.">    if (StringUtils.isBlank(subject)) {</span>
<span class="nc" id="L221">      throw new IllegalArgumentException(&quot;Subject cannot be null&quot;);</span>
    }
<span class="nc" id="L223">    this.subjects.add(subject);</span>
<span class="nc" id="L224">    return this;</span>
  }

  /**
   * Returns the list of recording subjects or an empty array if no subject have been specified.
   *
   * @return the subjects
   */
  public String[] getSubjects() {
<span class="nc" id="L233">    return subjects.toArray(new String[subjects.size()]);</span>
  }

  /**
   * Returns the organization of the series.
   *
   * @return the organization
   */
  public String getOrganization() {
<span class="nc" id="L242">    return organization;</span>
  }

  /**
   * Returns the user of this search query
   *
   * @return the user of this search query
   */
  public User getUser() {
<span class="nc" id="L251">    return user;</span>
  }

  /**
   * Selects series with the given language.
   *
   * @param language
   *          the language
   * @return the enhanced search query
   */
  public SeriesSearchQuery withLanguage(String language) {
<span class="nc" id="L262">    this.language = language;</span>
<span class="nc" id="L263">    return this;</span>
  }

  /**
   * Returns the language of the series.
   *
   * @return the language
   */
  public String getLanguage() {
<span class="nc" id="L272">    return language;</span>
  }

  /**
   * Selects series with the given creator.
   *
   * @param creator
   *          the creator
   * @return the enhanced search query
   */
  public SeriesSearchQuery withCreator(String creator) {
<span class="nc" id="L283">    this.creator = creator;</span>
<span class="nc" id="L284">    return this;</span>
  }

  /**
   * Returns the creator of the series.
   *
   * @return the creator
   */
  public String getCreator() {
<span class="nc" id="L293">    return creator;</span>
  }

  /**
   * Selects series with the given license.
   *
   * @param license
   *          the license
   * @return the enhanced search query
   */
  public SeriesSearchQuery withLicense(String license) {
<span class="nc" id="L304">    this.license = license;</span>
<span class="nc" id="L305">    return this;</span>
  }

  /**
   * Returns the license of the series.
   *
   * @return the license
   */
  public String getLicense() {
<span class="nc" id="L314">    return license;</span>
  }

  /**
   * Selects series with the given access policy.
   *
   * @param accessPolicy
   *          the access policy
   * @return the enhanced search query
   */
  public SeriesSearchQuery withAccessPolicy(String accessPolicy) {
<span class="nc" id="L325">    this.accessPolicy = accessPolicy;</span>
<span class="nc" id="L326">    return this;</span>
  }

  /**
   * Returns the access policy of the series.
   *
   * @return the access policy
   */
  public String getAccessPolicy() {
<span class="nc" id="L335">    return accessPolicy;</span>
  }

  /**
   * Selects series with the given theme.
   *
   * @param theme
   *          the theme
   * @return the enhanced search query
   */
  public SeriesSearchQuery withTheme(long theme) {
<span class="fc" id="L346">    this.theme = theme;</span>
<span class="fc" id="L347">    return this;</span>
  }

  /**
   * Returns the theme of the series.
   *
   * @return the theme
   */
  public Long getTheme() {
<span class="nc" id="L356">    return theme;</span>
  }

  /**
   * Selects series with the given managed ACL name.
   *
   * @param managedAcl
   *          the name of the managed ACL
   * @return the enhanced search query
   */
  public SeriesSearchQuery withManagedAcl(String managedAcl) {
<span class="fc" id="L367">    this.managedAcl = managedAcl;</span>
<span class="fc" id="L368">    return this;</span>
  }

  /**
   * Returns the name of the managed ACL set to the series.
   *
   * @return the name of the managed ACL
   */
  public String getManagedAcl() {
<span class="nc" id="L377">    return managedAcl;</span>
  }

  /**
   * Selects series with the given organizers.
   * &lt;p&gt;
   * Note that this method may be called multiple times to support selection of multiple series.
   *
   * @param organizer
   *          the organizer
   * @return the enhanced search query
   */
  public SeriesSearchQuery withOrganizer(String organizer) {
<span class="nc bnc" id="L390" title="All 2 branches missed.">    if (StringUtils.isBlank(organizer)) {</span>
<span class="nc" id="L391">      throw new IllegalArgumentException(&quot;Organizer cannot be null&quot;);</span>
    }
<span class="nc" id="L393">    this.organizers.add(organizer);</span>
<span class="nc" id="L394">    return this;</span>
  }

  /**
   * Returns the list of series organizers or an empty array if no organizers have been specified.
   *
   * @return the organizers
   */
  public String[] getOrganizers() {
<span class="nc" id="L403">    return organizers.toArray(new String[organizers.size()]);</span>
  }

  /**
   * Selects series with the given contributor.
   * &lt;p&gt;
   * Note that this method may be called multiple times to support selection of multiple contributors.
   *
   * @param contributor
   *          the contributor
   * @return the enhanced search query
   */
  public SeriesSearchQuery withContributor(String contributor) {
<span class="nc bnc" id="L416" title="All 2 branches missed.">    if (StringUtils.isBlank(contributor)) {</span>
<span class="nc" id="L417">      throw new IllegalArgumentException(&quot;Contributor can't be null&quot;);</span>
    }
<span class="nc" id="L419">    this.contributors.add(contributor);</span>
<span class="nc" id="L420">    return this;</span>
  }

  /**
   * Returns the list of series contributors or an empty array if no contributor have been specified.
   *
   * @return the contributors
   */
  public String[] getContributors() {
<span class="nc" id="L429">    return contributors.toArray(new String[contributors.size()]);</span>
  }

  /**
   * Select series with the given publishers
   *
   * @param publisher
   *          The publisher to add to the search query.
   * @return This query with the added publisher
   */
  public SeriesSearchQuery withPublisher(String publisher) {
<span class="nc bnc" id="L440" title="All 2 branches missed.">    if (StringUtils.isBlank(publisher)) {</span>
<span class="nc" id="L441">      throw new IllegalArgumentException(&quot;Publisher can't be null&quot;);</span>
    }
<span class="nc" id="L443">    this.publishers.add(publisher);</span>
<span class="nc" id="L444">    return this;</span>
  }

  /**
   * Returns an array of series publishers or an empty array if no publisher has been specified.
   *
   * @return The publishers
   */
  public String[] getPublishers() {
<span class="nc" id="L453">    return publishers.toArray(new String[publishers.size()]);</span>
  }

  /**
   * The created date to start looking for series.
   *
   * @param createdFrom
   *          The created date to start looking for series
   * @return the enhanced search query
   */
  public SeriesSearchQuery withCreatedFrom(Date createdFrom) {
<span class="nc" id="L464">    this.createdFrom = createdFrom;</span>
<span class="nc" id="L465">    return this;</span>
  }

  /**
   * @return The Date after which all series returned should have been created
   */
  public Date getCreatedFrom() {
<span class="nc" id="L472">    return createdFrom;</span>
  }

  /**
   * The created date to stop looking for series.
   *
   * @param createdTo
   *          The created date to stop looking for series
   * @return the enhanced search query
   */
  public SeriesSearchQuery withCreatedTo(Date createdTo) {
<span class="nc" id="L483">    this.createdTo = createdTo;</span>
<span class="nc" id="L484">    return this;</span>
  }

  /**
   * @return The Date before which all series returned should have been created
   */
  public Date getCreatedTo() {
<span class="nc" id="L491">    return createdTo;</span>
  }

  /**
   * @param edit
   *          True to only get series with edit permissions
   * @return enhanced search query
   */
  public SeriesSearchQuery withEdit(Boolean edit) {
<span class="nc" id="L500">    this.editOnly = edit;</span>
<span class="nc" id="L501">    return this;</span>
  }

  /**
   * @return True to only get series that this user can edit.
   */
  public boolean isEditOnly() {
<span class="nc" id="L508">    return editOnly;</span>
  }

  /**
   * @param rightsHolder
   *          The rights holder to search for
   * @return enhanced query
   */
  public SeriesSearchQuery withRightsHolder(String rightsHolder) {
<span class="nc" id="L517">    this.rightsHolder = rightsHolder;</span>
<span class="nc" id="L518">    return this;</span>
  }

  /**
   * @return The rights holder to search for
   */
  public String getRightsHolder() {
<span class="nc" id="L525">    return rightsHolder;</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByIdentifer(Order order) {
<span class="nc" id="L536">    withSortOrder(SeriesIndexSchema.UID, order);</span>
<span class="nc" id="L537">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesIdentifierSortOrder() {
<span class="nc" id="L546">    return getSortOrder(SeriesIndexSchema.UID);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortBySubject(Order order) {
<span class="nc" id="L557">    withSortOrder(SeriesIndexSchema.SUBJECT, order);</span>
<span class="nc" id="L558">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesSubjectSortOrder() {
<span class="nc" id="L567">    return getSortOrder(SeriesIndexSchema.SUBJECT);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByCreator(Order order) {
<span class="nc" id="L578">    withSortOrder(SeriesIndexSchema.CREATOR, order);</span>
<span class="nc" id="L579">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesCreatorSortOrder() {
<span class="nc" id="L588">    return getSortOrder(SeriesIndexSchema.CREATOR);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByPublishers(Order order) {
<span class="nc" id="L599">    withSortOrder(SeriesIndexSchema.PUBLISHERS, order);</span>
<span class="nc" id="L600">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesPublishersSortOrder() {
<span class="nc" id="L609">    return getSortOrder(SeriesIndexSchema.PUBLISHERS);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByDescription(Order order) {
<span class="nc" id="L620">    withSortOrder(SeriesIndexSchema.DESCRIPTION, order);</span>
<span class="nc" id="L621">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesDescriptionSortOrder() {
<span class="nc" id="L630">    return getSortOrder(SeriesIndexSchema.DESCRIPTION);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByLanguage(Order order) {
<span class="nc" id="L641">    withSortOrder(SeriesIndexSchema.LANGUAGE, order);</span>
<span class="nc" id="L642">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesLanguageSortOrder() {
<span class="nc" id="L651">    return getSortOrder(SeriesIndexSchema.LANGUAGE);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByRightsHolder(Order order) {
<span class="nc" id="L662">    withSortOrder(SeriesIndexSchema.RIGHTS_HOLDER, order);</span>
<span class="nc" id="L663">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesRightsHolderSortOrder() {
<span class="nc" id="L672">    return getSortOrder(SeriesIndexSchema.RIGHTS_HOLDER);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByLicense(Order order) {
<span class="nc" id="L683">    withSortOrder(SeriesIndexSchema.LICENSE, order);</span>
<span class="nc" id="L684">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesLicenseSortOrder() {
<span class="nc" id="L693">    return getSortOrder(SeriesIndexSchema.LICENSE);</span>
  }

  /**
   * Defines the sort order for the series by contributors.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByContributors(Order order) {
<span class="fc" id="L704">    withSortOrder(SeriesIndexSchema.CONTRIBUTORS, order);</span>
<span class="fc" id="L705">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesContributorsSortOrder() {
<span class="fc" id="L714">    return getSortOrder(SeriesIndexSchema.CONTRIBUTORS);</span>
  }

  /**
   * Defines the sort order for the managed ACL.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByManagedAcl(Order order) {
<span class="fc" id="L725">    withSortOrder(SeriesIndexSchema.MANAGED_ACL, order);</span>
<span class="fc" id="L726">    return this;</span>
  }

  /**
   * Returns the sort order for the series managed ACL.
   *
   * @return the sort order
   */
  public Order getSeriesManagedAclSortOrder() {
<span class="nc" id="L735">    return getSortOrder(SeriesIndexSchema.MANAGED_ACL);</span>
  }

  /**
   * Defines the sort order for the series created date &amp;amp; time.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByCreatedDateTime(Order order) {
<span class="fc" id="L746">    withSortOrder(SeriesIndexSchema.CREATED_DATE_TIME, order);</span>
<span class="fc" id="L747">    return this;</span>
  }

  /**
   * Returns the sort order for the series created date.
   *
   * @return the sort order
   */
  public Order getSeriesDateSortOrder() {
<span class="fc" id="L756">    return getSortOrder(SeriesIndexSchema.CREATED_DATE_TIME);</span>
  }

  /**
   * Defines the sort order for the series by organizers.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByOrganizers(Order order) {
<span class="fc" id="L767">    withSortOrder(SeriesIndexSchema.ORGANIZERS, order);</span>
<span class="fc" id="L768">    return this;</span>
  }

  /**
   * Returns the sort order for the series organizers.
   *
   * @return the sort order
   */
  public Order getSeriesOrganizersSortOrder() {
<span class="fc" id="L777">    return getSortOrder(SeriesIndexSchema.ORGANIZERS);</span>
  }

  /**
   * Defines the sort order for the series by title.
   *
   * @param order
   *          the order
   * @return the enhanced search query
   */
  public SeriesSearchQuery sortByTitle(Order order) {
<span class="fc" id="L788">    withSortOrder(SeriesIndexSchema.TITLE, order);</span>
<span class="fc" id="L789">    return this;</span>
  }

  /**
   * Returns the sort order for the series title.
   *
   * @return the sort order
   */
  public Order getSeriesTitleSortOrder() {
<span class="fc" id="L798">    return getSortOrder(SeriesIndexSchema.TITLE);</span>
  }

  @Override
  public String toString() {
<span class="fc" id="L803">    StringBuilder sb = new StringBuilder();</span>
<span class="fc" id="L804">    sb.append(SeriesSearchQuery.class.getSimpleName() + &quot; &quot;);</span>
<span class="pc bpc" id="L805" title="1 of 2 branches missed.">    if (identifiers.size() &gt; 0) {</span>
<span class="nc" id="L806">      sb.append(&quot;ids:'&quot; + identifiers.toString() + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L808" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(title) != null) {</span>
<span class="nc" id="L809">      sb.append(&quot;title:'&quot; + title + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L811" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(description) != null) {</span>
<span class="nc" id="L812">      sb.append(&quot;description:'&quot; + description + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L814" title="1 of 2 branches missed.">    if (subjects.size() &gt; 0) {</span>
<span class="nc" id="L815">      sb.append(&quot;subjects:'&quot; + subjects.toString() + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L817" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(organization) != null) {</span>
<span class="fc" id="L818">      sb.append(&quot;organization:'&quot; + organization + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L820" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(language) != null) {</span>
<span class="nc" id="L821">      sb.append(&quot;language:'&quot; + language + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L823" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(creator) != null) {</span>
<span class="nc" id="L824">      sb.append(&quot;creator:'&quot; + creator + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L826" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(license) != null) {</span>
<span class="nc" id="L827">      sb.append(&quot;license:'&quot; + license + &quot;' &quot;);</span>
    }
<span class="pc bpc" id="L829" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(accessPolicy) != null) {</span>
<span class="nc" id="L830">      sb.append(&quot;ACL:'&quot; + accessPolicy + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L833" title="1 of 2 branches missed.">    if (createdFrom != null) {</span>
<span class="nc" id="L834">      sb.append(&quot;Created From:'&quot; + createdFrom + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L837" title="1 of 2 branches missed.">    if (createdTo != null) {</span>
<span class="nc" id="L838">      sb.append(&quot;Created To:'&quot; + createdTo + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L841" title="1 of 2 branches missed.">    if (organizers.size() &gt; 0) {</span>
<span class="nc" id="L842">      sb.append(&quot;organizers:'&quot; + organizers.toString() + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L845" title="1 of 2 branches missed.">    if (contributors.size() &gt; 0) {</span>
<span class="nc" id="L846">      sb.append(&quot;contributors:'&quot; + contributors.toString() + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L849" title="1 of 2 branches missed.">    if (publishers.size() &gt; 0) {</span>
<span class="nc" id="L850">      sb.append(&quot;publishers:'&quot; + publishers.toString() + &quot;' &quot;);</span>
    }

<span class="pc bpc" id="L853" title="1 of 2 branches missed.">    if (theme != null) {</span>
<span class="nc" id="L854">      sb.append(&quot;Theme:'&quot; + theme + &quot;' &quot;);</span>
    }

<span class="fc" id="L857">    sb.append(&quot;Edit:'&quot; + editOnly + &quot;' &quot;);</span>

<span class="pc bpc" id="L859" title="1 of 2 branches missed.">    if (getTerms().size() &gt; 0) {</span>
<span class="nc" id="L860">      sb.append(&quot;Text:&quot;);</span>
<span class="nc bnc" id="L861" title="All 2 branches missed.">      for (SearchTerms&lt;String&gt; searchTerm : getTerms()) {</span>
<span class="nc" id="L862">        sb.append(&quot;'&quot; + searchTerm.getTerms() + &quot;' &quot;);</span>
<span class="nc" id="L863">      }</span>
    }

<span class="pc bpc" id="L866" title="1 of 2 branches missed.">    if (StringUtils.trimToNull(rightsHolder) != null) {</span>
<span class="nc" id="L867">      sb.append(&quot;Rights Holder:'&quot; + rightsHolder + &quot;' &quot;);</span>
    }

<span class="fc" id="L870">    return sb.toString();</span>

  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>