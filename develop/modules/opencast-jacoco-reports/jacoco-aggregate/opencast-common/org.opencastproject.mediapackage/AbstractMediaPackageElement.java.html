<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>AbstractMediaPackageElement.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-common</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.mediapackage</a> &gt; <span class="el_source">AbstractMediaPackageElement.java</span></div><h1>AbstractMediaPackageElement.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */

package org.opencastproject.mediapackage;

import org.opencastproject.util.Checksum;
import org.opencastproject.util.IoSupport;
import org.opencastproject.util.MimeType;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.Serializable;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Arrays;
import java.util.Collection;
import java.util.SortedSet;
import java.util.TreeSet;
import java.util.UUID;

import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlID;
import javax.xml.bind.annotation.XmlTransient;

/**
 * This class provides base functionality for media package elements.
 */
@XmlTransient
@XmlAccessorType(XmlAccessType.NONE)
public abstract class AbstractMediaPackageElement implements MediaPackageElement, Serializable {

  /** Serial version uid */
  private static final long serialVersionUID = 1L;

  /** The element identifier */
<span class="fc" id="L65">  @XmlID</span>
  @XmlAttribute(name = &quot;id&quot;)
  protected String id = null;

  /** The element's type whithin the manifest: Track, Catalog etc. */
<span class="fc" id="L70">  protected Type elementType = null;</span>

  /** The element's description */
<span class="fc" id="L73">  protected String description = null;</span>

  /** The element's mime type, e. g. 'audio/mp3' */
<span class="fc" id="L76">  @XmlElement(name = &quot;mimetype&quot;)</span>
  protected MimeType mimeType = null;

  /** The element's type, e. g. 'track/slide' */
<span class="fc" id="L80">  @XmlAttribute(name = &quot;type&quot;)</span>
  protected MediaPackageElementFlavor flavor = null;

  /** The tags */
<span class="fc" id="L84">  @XmlElementWrapper(name = &quot;tags&quot;)</span>
  @XmlElement(name = &quot;tag&quot;)
  protected SortedSet&lt;String&gt; tags = new TreeSet&lt;String&gt;();

  /** The element's location */
<span class="fc" id="L89">  @XmlElement(name = &quot;url&quot;)</span>
  protected URI uri = null;

  /** Size in bytes */
<span class="fc" id="L93">  @XmlElement(name = &quot;size&quot;)</span>
  protected Long size = null;

  /** The element's checksum */
<span class="fc" id="L97">  @XmlElement(name = &quot;checksum&quot;)</span>
  protected Checksum checksum = null;

  /** The parent media package */
<span class="fc" id="L101">  protected MediaPackage mediaPackage = null;</span>

  /** The optional reference to other elements or series */
<span class="fc" id="L104">  @XmlAttribute(name = &quot;ref&quot;)</span>
  protected MediaPackageReference reference = null;

  /** Needed by JAXB */
<span class="fc" id="L108">  protected AbstractMediaPackageElement() {</span>
<span class="fc" id="L109">  }</span>

  /**
   * Creates a new media package element.
   *
   * @param elementType
   *          the type, e. g. Track, Catalog etc.
   * @param flavor
   *          the flavor
   * @param uri
   *          the elements location
   */
  protected AbstractMediaPackageElement(Type elementType, MediaPackageElementFlavor flavor, URI uri) {
<span class="fc" id="L122">    this(null, elementType, flavor, uri, null, null, null);</span>
<span class="fc" id="L123">  }</span>

  /**
   * Creates a new media package element.
   *
   * @param elementType
   *          the type, e. g. Track, Catalog etc.
   * @param flavor
   *          the flavor
   * @param uri
   *          the elements location
   * @param size
   *          the element size in bytes
   * @param checksum
   *          the element checksum
   * @param mimeType
   *          the element mime type
   */
  protected AbstractMediaPackageElement(Type elementType, MediaPackageElementFlavor flavor, URI uri, Long size,
          Checksum checksum, MimeType mimeType) {
<span class="fc" id="L143">    this(null, elementType, flavor, uri, size, checksum, mimeType);</span>
<span class="fc" id="L144">  }</span>

  /**
   * Creates a new media package element.
   *
   * @param id
   *          the element identifier withing the package
   * @param elementType
   *          the type, e. g. Track, Catalog etc.
   * @param flavor
   *          the flavor
   * @param uri
   *          the elements location
   * @param size
   *          the element size in bytes
   * @param checksum
   *          the element checksum
   * @param mimeType
   *          the element mime type
   */
  protected AbstractMediaPackageElement(String id, Type elementType, MediaPackageElementFlavor flavor, URI uri,
<span class="fc" id="L165">          Long size, Checksum checksum, MimeType mimeType) {</span>
<span class="pc bpc" id="L166" title="1 of 2 branches missed.">    if (elementType == null)</span>
<span class="nc" id="L167">      throw new IllegalArgumentException(&quot;Argument 'elementType' is null&quot;);</span>
<span class="fc" id="L168">    this.id = id;</span>
<span class="fc" id="L169">    this.elementType = elementType;</span>
<span class="fc" id="L170">    this.flavor = flavor;</span>
<span class="fc" id="L171">    this.mimeType = mimeType;</span>
<span class="fc" id="L172">    this.uri = uri;</span>
<span class="fc" id="L173">    this.size = size;</span>
<span class="fc" id="L174">    this.checksum = checksum;</span>
<span class="fc" id="L175">    this.tags = new TreeSet&lt;String&gt;();</span>
<span class="fc" id="L176">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setIdentifier(String)
   */
  @Override
  public void setIdentifier(String id) {
<span class="fc" id="L183">    this.id = id;</span>
<span class="fc" id="L184">  }</span>

  @Override
  public String generateIdentifier() {
<span class="nc" id="L188">    id = UUID.randomUUID().toString();</span>
<span class="nc" id="L189">    return id;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getIdentifier()
   */
  @Override
  public String getIdentifier() {
<span class="fc" id="L197">    return id;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setTags(java.lang.String[])
   */
  @Override
  public void setTags(String[] tags) {
<span class="nc" id="L205">    this.tags = new TreeSet&lt;String&gt;(Arrays.asList(tags));</span>
<span class="nc" id="L206">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#addTag(java.lang.String)
   */
  @Override
  public void addTag(String tag) {
<span class="pc bpc" id="L213" title="1 of 2 branches missed.">    if (tag == null)</span>
<span class="nc" id="L214">      throw new IllegalArgumentException(&quot;Tag must not be null&quot;);</span>
<span class="fc" id="L215">    tags.add(tag);</span>
<span class="fc" id="L216">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#removeTag(java.lang.String)
   */
  @Override
  public void removeTag(String tag) {
<span class="pc bpc" id="L223" title="1 of 2 branches missed.">    if (tag == null)</span>
<span class="nc" id="L224">      return;</span>
<span class="fc" id="L225">    tags.remove(tag);</span>
<span class="fc" id="L226">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#containsTag(java.lang.String)
   */
  @Override
  public boolean containsTag(String tag) {
<span class="pc bpc" id="L233" title="2 of 4 branches missed.">    if (tag == null || tags == null)</span>
<span class="nc" id="L234">      return false;</span>
<span class="fc" id="L235">    return tags.contains(tag);</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#containsTag(java.util.Collection)
   */
  @Override
  public boolean containsTag(Collection&lt;String&gt; tags) {
<span class="pc bpc" id="L243" title="1 of 4 branches missed.">    if (tags == null || tags.size() == 0)</span>
<span class="fc" id="L244">      return true;</span>
<span class="fc bfc" id="L245" title="All 2 branches covered.">    for (String tag : tags) {</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">      if (containsTag(tag))</span>
<span class="fc" id="L247">        return true;</span>
<span class="fc" id="L248">    }</span>
<span class="fc" id="L249">    return false;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getTags()
   */
  @Override
  public String[] getTags() {
<span class="fc" id="L257">    return tags.toArray(new String[tags.size()]);</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#clearTags()
   */
  @Override
  public void clearTags() {
<span class="pc bpc" id="L265" title="1 of 2 branches missed.">    if (tags != null)</span>
<span class="fc" id="L266">      tags.clear();</span>
<span class="fc" id="L267">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getMediaPackage()
   */
  @Override
  public MediaPackage getMediaPackage() {
<span class="fc" id="L274">    return mediaPackage;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getElementType()
   */
  @Override
  public Type getElementType() {
<span class="fc" id="L282">    return elementType;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getElementDescription()
   */
  @Override
  public String getElementDescription() {
<span class="pc bpc" id="L290" title="1 of 2 branches missed.">    return (description != null) ? description : uri.toString();</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setElementDescription(String)
   */
  @Override
  public void setElementDescription(String name) {
<span class="fc" id="L298">    this.description = name;</span>
<span class="fc" id="L299">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getReference()
   */
  @Override
  public MediaPackageReference getReference() {
<span class="fc" id="L306">    return reference;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setReference(MediaPackageReference)
   */
  @Override
  public void setReference(MediaPackageReference reference) {
<span class="fc" id="L314">    this.reference = reference;</span>
<span class="fc" id="L315">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getURI()
   */
  @Override
  public URI getURI() {
<span class="fc" id="L322">    return uri;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setURI(java.net.URI)
   */
  @Override
  public void setURI(URI uri) {
<span class="fc" id="L330">    this.uri = uri;</span>
<span class="fc" id="L331">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getChecksum()
   */
  @Override
  public Checksum getChecksum() {
<span class="fc" id="L338">    return checksum;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setChecksum(org.opencastproject.util.Checksum)
   */
  @Override
  public void setChecksum(Checksum checksum) {
<span class="fc" id="L346">    this.checksum = checksum;</span>
<span class="fc" id="L347">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getMimeType()
   */
  @Override
  public MimeType getMimeType() {
<span class="fc" id="L354">    return mimeType;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setMimeType(org.opencastproject.util.MimeType)
   */
  @Override
  public void setMimeType(MimeType mimeType) {
<span class="fc" id="L362">    this.mimeType = mimeType;</span>
<span class="fc" id="L363">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setFlavor(MediaPackageElementFlavor)
   */
  @Override
  public void setFlavor(MediaPackageElementFlavor flavor) {
<span class="fc" id="L370">    this.flavor = flavor;</span>
<span class="fc" id="L371">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getFlavor()
   */
  @Override
  public MediaPackageElementFlavor getFlavor() {
<span class="fc" id="L378">    return flavor;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#getSize()
   */
  @Override
  public long getSize() {
<span class="pc bpc" id="L386" title="1 of 2 branches missed.">    return size != null ? size : -1;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#setSize(long)
   */
  @Override
  public void setSize(long size) {
<span class="fc" id="L394">    this.size = size;</span>
<span class="fc" id="L395">  }</span>

  /**
   * Sets the parent media package.
   * &lt;p&gt;
   * &lt;b&gt;Note&lt;/b&gt; This method is only used by the media package and should not be called from elsewhere.
   *
   * @param mediaPackage
   *          the parent media package
   */
  void setMediaPackage(MediaPackage mediaPackage) {
<span class="fc" id="L406">    this.mediaPackage = mediaPackage;</span>
<span class="fc" id="L407">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#referTo(org.opencastproject.mediapackage.MediaPackageElement)
   */
  @Override
  public void referTo(MediaPackageElement element) {
<span class="fc" id="L414">    referTo(new MediaPackageReferenceImpl(element));</span>
<span class="fc" id="L415">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#referTo(org.opencastproject.mediapackage.MediaPackageReference)
   */
  @Override
  public void referTo(MediaPackageReference reference) {
    // TODO: Check reference consistency
<span class="fc" id="L423">    this.reference = reference;</span>
<span class="fc" id="L424">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#clearReference()
   */
  @Override
  public void clearReference() {
<span class="nc" id="L431">    this.reference = null;</span>
<span class="nc" id="L432">  }</span>

  /**
   * @see org.opencastproject.mediapackage.MediaPackageElement#verify()
   */
  @Override
  public void verify() throws MediaPackageException {
    // TODO: Check availability at url
    // TODO: Download (?) and check checksum
    // Checksum c = calculateChecksum();
    // if (checksum != null &amp;&amp; !checksum.equals(c)) {
    // throw new MediaPackageException(&quot;Checksum mismatch for &quot; + this);
    // }
    // checksum = c;
<span class="fc" id="L446">  }</span>

  /**
   * @see java.lang.Comparable#compareTo(java.lang.Object)
   */
  @Override
  public int compareTo(MediaPackageElement o) {
<span class="fc" id="L453">    return uri.toString().compareTo(o.getURI().toString());</span>
  }

  /**
   * @see java.lang.Object#equals(java.lang.Object)
   */
  @Override
  public boolean equals(Object obj) {
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">    if (!(obj instanceof MediaPackageElement))</span>
<span class="nc" id="L462">      return false;</span>
<span class="fc" id="L463">    MediaPackageElement e = (MediaPackageElement) obj;</span>
<span class="pc bpc" id="L464" title="2 of 6 branches missed.">    if (mediaPackage != null &amp;&amp; e.getMediaPackage() != null &amp;&amp; !mediaPackage.equals(e.getMediaPackage()))</span>
<span class="nc" id="L465">      return false;</span>
<span class="fc bfc" id="L466" title="All 4 branches covered.">    if (id != null &amp;&amp; !id.equals(e.getIdentifier()))</span>
<span class="fc" id="L467">      return false;</span>
<span class="pc bpc" id="L468" title="1 of 4 branches missed.">    if (uri != null &amp;&amp; !uri.equals(e.getURI()))</span>
<span class="nc" id="L469">      return false;</span>
<span class="fc" id="L470">    return true;</span>
  }

  /**
   * @see java.lang.Object#hashCode()
   */
  @Override
  public int hashCode() {
<span class="fc" id="L478">    final int prime = 31;</span>
<span class="fc" id="L479">    int result = 1;</span>
<span class="fc bfc" id="L480" title="All 2 branches covered.">    result = prime * result + ((id == null) ? 0 : id.hashCode());</span>
<span class="fc bfc" id="L481" title="All 2 branches covered.">    result = prime * result + ((mediaPackage == null) ? 0 : mediaPackage.hashCode());</span>
<span class="fc bfc" id="L482" title="All 2 branches covered.">    result = prime * result + ((uri == null) ? 0 : uri.hashCode());</span>
<span class="fc" id="L483">    return result;</span>
  }

  /**
   * @see org.opencastproject.mediapackage.ManifestContributor#toManifest(org.w3c.dom.Document,
   *      org.opencastproject.mediapackage.MediaPackageSerializer)
   */
  @Override
  public Node toManifest(Document document, MediaPackageSerializer serializer) throws MediaPackageException {
<span class="nc" id="L492">    Element node = document.createElement(elementType.toString().toLowerCase());</span>
<span class="nc bnc" id="L493" title="All 2 branches missed.">    if (id != null)</span>
<span class="nc" id="L494">      node.setAttribute(&quot;id&quot;, id);</span>

    // Flavor
<span class="nc bnc" id="L497" title="All 2 branches missed.">    if (flavor != null)</span>
<span class="nc" id="L498">      node.setAttribute(&quot;type&quot;, flavor.toString());</span>

    // Reference
<span class="nc bnc" id="L501" title="All 2 branches missed.">    if (reference != null)</span>
<span class="nc bnc" id="L502" title="All 4 branches missed.">      if (mediaPackage == null || !reference.matches(new MediaPackageReferenceImpl(mediaPackage)))</span>
<span class="nc" id="L503">        node.setAttribute(&quot;ref&quot;, reference.toString());</span>

    // Description
<span class="nc bnc" id="L506" title="All 2 branches missed.">    if (description != null) {</span>
<span class="nc" id="L507">      Element descriptionNode = document.createElement(&quot;description&quot;);</span>
<span class="nc" id="L508">      descriptionNode.appendChild(document.createTextNode(description));</span>
<span class="nc" id="L509">      node.appendChild(descriptionNode);</span>
    }

    // Tags
<span class="nc bnc" id="L513" title="All 2 branches missed.">    if (tags.size() &gt; 0) {</span>
<span class="nc" id="L514">      Element tagsNode = document.createElement(&quot;tags&quot;);</span>
<span class="nc" id="L515">      node.appendChild(tagsNode);</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">      for (String tag : tags) {</span>
<span class="nc" id="L517">        Element tagNode = document.createElement(&quot;tag&quot;);</span>
<span class="nc" id="L518">        tagsNode.appendChild(tagNode);</span>
<span class="nc" id="L519">        tagNode.appendChild(document.createTextNode(tag));</span>
<span class="nc" id="L520">      }</span>
    }

    // Url
<span class="nc" id="L524">    Element urlNode = document.createElement(&quot;url&quot;);</span>
    String urlValue;
    try {
<span class="nc bnc" id="L527" title="All 2 branches missed.">      urlValue = (serializer != null) ? serializer.encodeURI(uri).toString() : uri.toString();</span>
<span class="nc" id="L528">    } catch (URISyntaxException e) {</span>
<span class="nc" id="L529">      throw new MediaPackageException(e);</span>
<span class="nc" id="L530">    }</span>
<span class="nc" id="L531">    urlNode.appendChild(document.createTextNode(urlValue));</span>
<span class="nc" id="L532">    node.appendChild(urlNode);</span>

    // MimeType
<span class="nc bnc" id="L535" title="All 2 branches missed.">    if (mimeType != null) {</span>
<span class="nc" id="L536">      Element mimeNode = document.createElement(&quot;mimetype&quot;);</span>
<span class="nc" id="L537">      mimeNode.appendChild(document.createTextNode(mimeType.toString()));</span>
<span class="nc" id="L538">      node.appendChild(mimeNode);</span>
    }

    // Size
<span class="nc bnc" id="L542" title="All 4 branches missed.">    if (size != null &amp;&amp; size != -1) {</span>
<span class="nc" id="L543">      Element sizeNode = document.createElement(&quot;size&quot;);</span>
<span class="nc" id="L544">      sizeNode.appendChild(document.createTextNode(Long.toString(size)));</span>
<span class="nc" id="L545">      node.appendChild(sizeNode);</span>
    }

    // Checksum
<span class="nc bnc" id="L549" title="All 2 branches missed.">    if (checksum != null) {</span>
<span class="nc" id="L550">      Element checksumNode = document.createElement(&quot;checksum&quot;);</span>
<span class="nc" id="L551">      checksumNode.setAttribute(&quot;type&quot;, checksum.getType().getName());</span>
<span class="nc" id="L552">      checksumNode.appendChild(document.createTextNode(checksum.getValue()));</span>
<span class="nc" id="L553">      node.appendChild(checksumNode);</span>
    }

<span class="nc" id="L556">    return node;</span>
  }

  /**
   * @see java.lang.Object#toString()
   */
  @Override
  public String toString() {
<span class="fc bfc" id="L564" title="All 2 branches covered.">    String s = (description != null) ? description : uri.toString();</span>
<span class="fc" id="L565">    return s.toLowerCase();</span>
  }

  /**
   * Attention: The media package reference is not being cloned so that calling &lt;code&gt;getMediaPackage()&lt;/code&gt; on the
   * clone yields null.
   */
  @Override
  public Object clone() {
<span class="fc" id="L574">    ByteArrayOutputStream out = new ByteArrayOutputStream();</span>
<span class="fc" id="L575">    ByteArrayInputStream in = null;</span>
    try {
<span class="fc" id="L577">      Marshaller marshaller = MediaPackageImpl.context.createMarshaller();</span>
<span class="fc" id="L578">      marshaller.marshal(this, out);</span>
<span class="fc" id="L579">      Unmarshaller unmarshaller = MediaPackageImpl.context.createUnmarshaller();</span>
<span class="fc" id="L580">      in = new ByteArrayInputStream(out.toByteArray());</span>
      // CHECKSTYLE:OFF
      // in was already parsed and is therefore save
<span class="fc" id="L583">      return unmarshaller.unmarshal(in);</span>
      // CHECKSTYLE:ON
<span class="nc" id="L585">    } catch (JAXBException e) {</span>
<span class="nc bnc" id="L586" title="All 2 branches missed.">      throw new RuntimeException(e.getLinkedException() != null ? e.getLinkedException() : e);</span>
    } finally {
<span class="fc" id="L588">      IoSupport.closeQuietly(in);</span>
    }
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>