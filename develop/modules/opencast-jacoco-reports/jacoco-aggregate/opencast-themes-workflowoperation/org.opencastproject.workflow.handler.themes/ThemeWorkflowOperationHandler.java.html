<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>ThemeWorkflowOperationHandler.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-themes-workflowoperation</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.workflow.handler.themes</a> &gt; <span class="el_source">ThemeWorkflowOperationHandler.java</span></div><h1>ThemeWorkflowOperationHandler.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */

package org.opencastproject.workflow.handler.themes;

import static java.lang.String.format;
import static org.opencastproject.composer.layout.Offset.offset;

import org.opencastproject.composer.layout.AbsolutePositionLayoutSpec;
import org.opencastproject.composer.layout.AnchorOffset;
import org.opencastproject.composer.layout.Anchors;
import org.opencastproject.composer.layout.Serializer;
import org.opencastproject.job.api.JobContext;
import org.opencastproject.mediapackage.MediaPackage;
import org.opencastproject.mediapackage.MediaPackageElement;
import org.opencastproject.mediapackage.MediaPackageElement.Type;
import org.opencastproject.mediapackage.MediaPackageElementBuilderFactory;
import org.opencastproject.mediapackage.MediaPackageElementFlavor;
import org.opencastproject.security.api.UnauthorizedException;
import org.opencastproject.series.api.SeriesException;
import org.opencastproject.series.api.SeriesService;
import org.opencastproject.serviceregistry.api.ServiceRegistry;
import org.opencastproject.staticfiles.api.StaticFileService;
import org.opencastproject.themes.Theme;
import org.opencastproject.themes.ThemesServiceDatabase;
import org.opencastproject.themes.persistence.ThemesServiceDatabaseException;
import org.opencastproject.util.MimeType;
import org.opencastproject.util.MimeTypes;
import org.opencastproject.util.NotFoundException;
import org.opencastproject.util.UnknownFileTypeException;
import org.opencastproject.workflow.api.AbstractWorkflowOperationHandler;
import org.opencastproject.workflow.api.WorkflowInstance;
import org.opencastproject.workflow.api.WorkflowOperationException;
import org.opencastproject.workflow.api.WorkflowOperationHandler;
import org.opencastproject.workflow.api.WorkflowOperationResult;
import org.opencastproject.workflow.api.WorkflowOperationResult.Action;
import org.opencastproject.workspace.api.Workspace;

import org.apache.commons.lang3.StringUtils;
import org.osgi.service.component.annotations.Component;
import org.osgi.service.component.annotations.Reference;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.Optional;
import java.util.UUID;

/**
 * The workflow definition for handling &quot;theme&quot; operations
 */
@Component(
    immediate = true,
    service = WorkflowOperationHandler.class,
    property = {
        &quot;service.description=Theme Workflow Operation Handler&quot;,
        &quot;workflow.operation=theme&quot;
    }
)
<span class="nc" id="L83">public class ThemeWorkflowOperationHandler extends AbstractWorkflowOperationHandler {</span>

  private static final String BUMPER_FLAVOR = &quot;bumper-flavor&quot;;
  private static final String BUMPER_TAGS = &quot;bumper-tags&quot;;

  private static final String TRAILER_FLAVOR = &quot;trailer-flavor&quot;;
  private static final String TRAILER_TAGS = &quot;trailer-tags&quot;;

  private static final String TITLE_SLIDE_FLAVOR = &quot;title-slide-flavor&quot;;
  private static final String TITLE_SLIDE_TAGS = &quot;title-slide-tags&quot;;

  private static final String LICENSE_SLIDE_FLAVOR = &quot;license-slide-flavor&quot;;
  private static final String LICENSE_SLIDE_TAGS = &quot;license-slide-tags&quot;;

  private static final String WATERMARK_FLAVOR = &quot;watermark-flavor&quot;;
  private static final String WATERMARK_TAGS = &quot;watermark-tags&quot;;
  private static final String WATERMARK_LAYOUT = &quot;watermark-layout&quot;;
  private static final String WATERMARK_LAYOUT_VARIABLE = &quot;watermark-layout-variable&quot;;

  /** Workflow property names */
  private static final String THEME_ACTIVE = &quot;theme_active&quot;;
  private static final String THEME_BUMPER_ACTIVE = &quot;theme_bumper_active&quot;;
  private static final String THEME_TRAILER_ACTIVE = &quot;theme_trailer_active&quot;;
  private static final String THEME_TITLE_SLIDE_ACTIVE = &quot;theme_title_slide_active&quot;;
  private static final String THEME_TITLE_SLIDE_UPLOADED = &quot;theme_title_slide_uploaded&quot;;
  private static final String THEME_WATERMARK_ACTIVE = &quot;theme_watermark_active&quot;;

  /** The series theme property name */
  private static final String THEME_PROPERTY_NAME = &quot;theme&quot;;

  /** The logging facility */
<span class="nc" id="L114">  private static final Logger logger = LoggerFactory.getLogger(ThemeWorkflowOperationHandler.class);</span>

<span class="nc" id="L116">  private static final MediaPackageElementBuilderFactory elementBuilderFactory = MediaPackageElementBuilderFactory</span>
<span class="nc" id="L117">          .newInstance();</span>

  /** The series service */
  private SeriesService seriesService;

  /** The themes database service */
  private ThemesServiceDatabase themesServiceDatabase;

  /** The static file service */
  private StaticFileService staticFileService;

  /** The workspace */
  private Workspace workspace;

  /** OSGi callback for the series service. */
  @Reference
  public void setSeriesService(SeriesService seriesService) {
<span class="nc" id="L134">    this.seriesService = seriesService;</span>
<span class="nc" id="L135">  }</span>

  /** OSGi callback for the themes database service. */
  @Reference
  public void setThemesServiceDatabase(ThemesServiceDatabase themesServiceDatabase) {
<span class="nc" id="L140">    this.themesServiceDatabase = themesServiceDatabase;</span>
<span class="nc" id="L141">  }</span>

  /** OSGi callback for the static file service. */
  @Reference
  public void setStaticFileService(StaticFileService staticFileService) {
<span class="nc" id="L146">    this.staticFileService = staticFileService;</span>
<span class="nc" id="L147">  }</span>

  /** OSGi callback for the workspace. */
  @Reference
  public void setWorkspace(Workspace workspace) {
<span class="nc" id="L152">    this.workspace = workspace;</span>
<span class="nc" id="L153">  }</span>

  @Reference
  @Override
  public void setServiceRegistry(ServiceRegistry serviceRegistry) {
<span class="nc" id="L158">    super.setServiceRegistry(serviceRegistry);</span>
<span class="nc" id="L159">  }</span>

  @Override
  public WorkflowOperationResult start(final WorkflowInstance workflowInstance, JobContext context)
          throws WorkflowOperationException {
<span class="nc" id="L164">    logger.debug(&quot;Running theme workflow operation on workflow {}&quot;, workflowInstance.getId());</span>

<span class="nc" id="L166">    final MediaPackageElementFlavor bumperFlavor = getOptConfig(workflowInstance, BUMPER_FLAVOR)</span>
<span class="nc" id="L167">        .map(MediaPackageElementFlavor::parseFlavor)</span>
<span class="nc" id="L168">        .orElse(new MediaPackageElementFlavor(&quot;branding&quot;, &quot;bumper&quot;));</span>
<span class="nc" id="L169">    final MediaPackageElementFlavor trailerFlavor = getOptConfig(workflowInstance, TRAILER_FLAVOR)</span>
<span class="nc" id="L170">        .map(MediaPackageElementFlavor::parseFlavor)</span>
<span class="nc" id="L171">        .orElse(new MediaPackageElementFlavor(&quot;branding&quot;, &quot;trailer&quot;));</span>
<span class="nc" id="L172">    final MediaPackageElementFlavor titleSlideFlavor = getOptConfig(workflowInstance, TITLE_SLIDE_FLAVOR)</span>
<span class="nc" id="L173">        .map(MediaPackageElementFlavor::parseFlavor)</span>
<span class="nc" id="L174">        .orElse(new MediaPackageElementFlavor(&quot;branding&quot;, &quot;title-slide&quot;));</span>
<span class="nc" id="L175">    final MediaPackageElementFlavor licenseSlideFlavor = getOptConfig(workflowInstance, LICENSE_SLIDE_FLAVOR)</span>
<span class="nc" id="L176">        .map(MediaPackageElementFlavor::parseFlavor)</span>
<span class="nc" id="L177">        .orElse(new MediaPackageElementFlavor(&quot;branding&quot;, &quot;license-slide&quot;));</span>
<span class="nc" id="L178">    final MediaPackageElementFlavor watermarkFlavor = getOptConfig(workflowInstance, WATERMARK_FLAVOR)</span>
<span class="nc" id="L179">        .map(MediaPackageElementFlavor::parseFlavor)</span>
<span class="nc" id="L180">        .orElse(new MediaPackageElementFlavor(&quot;branding&quot;, &quot;watermark&quot;));</span>
<span class="nc" id="L181">    final List&lt;String&gt; bumperTags = asList(workflowInstance.getConfiguration(BUMPER_TAGS));</span>
<span class="nc" id="L182">    final List&lt;String&gt; trailerTags = asList(workflowInstance.getConfiguration(TRAILER_TAGS));</span>
<span class="nc" id="L183">    final List&lt;String&gt; titleSlideTags = asList(workflowInstance.getConfiguration(TITLE_SLIDE_TAGS));</span>
<span class="nc" id="L184">    final List&lt;String&gt; licenseSlideTags = asList(workflowInstance.getConfiguration(LICENSE_SLIDE_TAGS));</span>
<span class="nc" id="L185">    final List&lt;String&gt; watermarkTags = asList(workflowInstance.getConfiguration(WATERMARK_TAGS));</span>

<span class="nc" id="L187">    Optional&lt;String&gt; layoutStringOpt = getOptConfig(workflowInstance, WATERMARK_LAYOUT);</span>
<span class="nc" id="L188">    Optional&lt;String&gt; watermarkLayoutVariable = getOptConfig(workflowInstance, WATERMARK_LAYOUT_VARIABLE);</span>

<span class="nc" id="L190">    List&lt;String&gt; layoutList = layoutStringOpt</span>
<span class="nc" id="L191">        .map(s -&gt; Arrays.asList(s.split(&quot;;&quot;)))</span>
<span class="nc" id="L192">        .orElse(Collections.emptyList());</span>

    try {
<span class="nc" id="L195">      MediaPackage mediaPackage = workflowInstance.getMediaPackage();</span>
<span class="nc" id="L196">      String series = mediaPackage.getSeries();</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">      if (series == null) {</span>
<span class="nc" id="L198">        logger.info(&quot;Skipping theme workflow operation, no series assigned to mediapackage {}&quot;,</span>
<span class="nc" id="L199">                mediaPackage.getIdentifier());</span>
<span class="nc" id="L200">        return createResult(Action.SKIP);</span>
      }

      Long themeId;
      try {
<span class="nc" id="L205">        themeId = Long.parseLong(seriesService.getSeriesProperty(series, THEME_PROPERTY_NAME));</span>
<span class="nc" id="L206">      } catch (NotFoundException e) {</span>
<span class="nc" id="L207">        logger.info(&quot;Skipping theme workflow operation, no theme assigned to series {} on mediapackage {}.&quot;, series,</span>
<span class="nc" id="L208">                mediaPackage.getIdentifier());</span>
<span class="nc" id="L209">        return createResult(Action.SKIP);</span>
<span class="nc" id="L210">      } catch (UnauthorizedException e) {</span>
<span class="nc" id="L211">        logger.warn(&quot;Skipping theme workflow operation, user not authorized to perform operation:&quot;, e);</span>
<span class="nc" id="L212">        return createResult(Action.SKIP);</span>
<span class="nc" id="L213">      }</span>

      Theme theme;
      try {
<span class="nc" id="L217">        theme = themesServiceDatabase.getTheme(themeId);</span>
<span class="nc" id="L218">      } catch (NotFoundException e) {</span>
<span class="nc" id="L219">        logger.warn(&quot;Skipping theme workflow operation, no theme with id {} found.&quot;, themeId);</span>
<span class="nc" id="L220">        return createResult(Action.SKIP);</span>
<span class="nc" id="L221">      }</span>

<span class="nc" id="L223">      logger.info(&quot;Applying theme {} to mediapackage {}&quot;, themeId, mediaPackage.getIdentifier());</span>

      /* Make theme settings available to workflow instance */
<span class="nc" id="L226">      workflowInstance.setConfiguration(THEME_ACTIVE, Boolean.toString(</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">                 theme.isBumperActive()</span>
<span class="nc bnc" id="L228" title="All 2 branches missed.">              || theme.isTrailerActive()</span>
<span class="nc bnc" id="L229" title="All 2 branches missed.">              || theme.isTitleSlideActive()</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">              || theme.isWatermarkActive()</span>
          )
      );
<span class="nc" id="L233">      workflowInstance.setConfiguration(THEME_BUMPER_ACTIVE, Boolean.toString(theme.isBumperActive()));</span>
<span class="nc" id="L234">      workflowInstance.setConfiguration(THEME_TRAILER_ACTIVE, Boolean.toString(theme.isTrailerActive()));</span>
<span class="nc" id="L235">      workflowInstance.setConfiguration(THEME_TITLE_SLIDE_ACTIVE, Boolean.toString(theme.isTitleSlideActive()));</span>
<span class="nc" id="L236">      workflowInstance.setConfiguration(</span>
          THEME_TITLE_SLIDE_UPLOADED,
<span class="nc" id="L238">          Boolean.toString(StringUtils.isNotBlank(theme.getTitleSlideBackground())));</span>
<span class="nc" id="L239">      workflowInstance.setConfiguration(THEME_WATERMARK_ACTIVE, Boolean.toString(theme.isWatermarkActive()));</span>

<span class="nc bnc" id="L241" title="All 4 branches missed.">      if (theme.isBumperActive() &amp;&amp; StringUtils.isNotBlank(theme.getBumperFile())) {</span>
<span class="nc" id="L242">        try (InputStream bumper = staticFileService.getFile(theme.getBumperFile())) {</span>
<span class="nc" id="L243">          addElement(mediaPackage, bumperFlavor, bumperTags, bumper,</span>
<span class="nc" id="L244">                  staticFileService.getFileName(theme.getBumperFile()), Type.Track);</span>
<span class="nc" id="L245">        } catch (NotFoundException e) {</span>
<span class="nc" id="L246">          logger.warn(&quot;Bumper file {} not found in static file service, skip applying it&quot;, theme.getBumperFile());</span>
<span class="nc" id="L247">        }</span>
      }

<span class="nc bnc" id="L250" title="All 4 branches missed.">      if (theme.isTrailerActive() &amp;&amp; StringUtils.isNotBlank(theme.getTrailerFile())) {</span>
<span class="nc" id="L251">        try (InputStream trailer = staticFileService.getFile(theme.getTrailerFile())) {</span>
<span class="nc" id="L252">          addElement(mediaPackage, trailerFlavor, trailerTags, trailer,</span>
<span class="nc" id="L253">                  staticFileService.getFileName(theme.getTrailerFile()), Type.Track);</span>
<span class="nc" id="L254">        } catch (NotFoundException e) {</span>
<span class="nc" id="L255">          logger.warn(&quot;Trailer file {} not found in static file service, skip applying it&quot;, theme.getTrailerFile());</span>
<span class="nc" id="L256">        }</span>
      }

<span class="nc bnc" id="L259" title="All 2 branches missed.">      if (theme.isTitleSlideActive()) {</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">        if (StringUtils.isNotBlank(theme.getTitleSlideBackground())) {</span>
<span class="nc" id="L261">          try (InputStream titleSlideBackground = staticFileService.getFile(theme.getTitleSlideBackground())) {</span>
<span class="nc" id="L262">            addElement(mediaPackage, titleSlideFlavor, titleSlideTags, titleSlideBackground,</span>
<span class="nc" id="L263">                    staticFileService.getFileName(theme.getTitleSlideBackground()), Type.Attachment);</span>
<span class="nc" id="L264">          } catch (NotFoundException e) {</span>
<span class="nc" id="L265">            logger.warn(&quot;Title slide file {} not found in static file service, skip applying it&quot;,</span>
<span class="nc" id="L266">                    theme.getTitleSlideBackground());</span>
<span class="nc" id="L267">          }</span>
        }

        // TODO add the title slide metadata to the workflow properties to be used by the cover-image WOH
        // String titleSlideMetadata = theme.getTitleSlideMetadata();
      }

<span class="nc bnc" id="L274" title="All 2 branches missed.">      if (theme.isLicenseSlideActive()) {</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">        if (StringUtils.isNotBlank(theme.getLicenseSlideBackground())) {</span>
<span class="nc" id="L276">          try (InputStream licenseSlideBackground = staticFileService.getFile(theme.getLicenseSlideBackground())) {</span>
<span class="nc" id="L277">            addElement(mediaPackage, licenseSlideFlavor, licenseSlideTags, licenseSlideBackground,</span>
<span class="nc" id="L278">                    staticFileService.getFileName(theme.getLicenseSlideBackground()), Type.Attachment);</span>
<span class="nc" id="L279">          } catch (NotFoundException e) {</span>
<span class="nc" id="L280">            logger.warn(&quot;License slide file {} not found in static file service, skip applying it&quot;,</span>
<span class="nc" id="L281">                    theme.getLicenseSlideBackground());</span>
<span class="nc" id="L282">          }</span>
        } else {
          // TODO define what to do here (maybe extract image as background)
        }

        // TODO add the license slide description to the workflow properties to be used by the cover-image WOH
        // String licenseSlideDescription = theme.getLicenseSlideDescription();
      }

<span class="nc bnc" id="L291" title="All 4 branches missed.">      if (theme.isWatermarkActive() &amp;&amp; StringUtils.isNotBlank(theme.getWatermarkFile())) {</span>
<span class="nc" id="L292">        try (InputStream watermark = staticFileService.getFile(theme.getWatermarkFile())) {</span>
<span class="nc" id="L293">          addElement(mediaPackage, watermarkFlavor, watermarkTags, watermark,</span>
<span class="nc" id="L294">                  staticFileService.getFileName(theme.getWatermarkFile()), Type.Attachment);</span>
<span class="nc" id="L295">        } catch (NotFoundException e) {</span>
<span class="nc" id="L296">          logger.warn(&quot;Watermark file {} not found in static file service, skip applying it&quot;, theme.getWatermarkFile());</span>
<span class="nc" id="L297">        }</span>

<span class="nc bnc" id="L299" title="All 4 branches missed.">        if (layoutStringOpt.isEmpty() || watermarkLayoutVariable.isEmpty()) {</span>
<span class="nc" id="L300">          throw new WorkflowOperationException(format(&quot;Configuration key '%s' or '%s' is either missing or empty&quot;,</span>
                  WATERMARK_LAYOUT, WATERMARK_LAYOUT_VARIABLE));
        }

<span class="nc" id="L304">        AbsolutePositionLayoutSpec watermarkLayout = parseLayout(theme.getWatermarkPosition());</span>
<span class="nc" id="L305">        layoutList.set(layoutList.size() - 1, Serializer.json(watermarkLayout).toJson());</span>
<span class="nc" id="L306">        layoutStringOpt = Optional.of(String.join(&quot;;&quot;, layoutList));</span>
      }

<span class="nc bnc" id="L309" title="All 4 branches missed.">      if (watermarkLayoutVariable.isPresent() &amp;&amp; layoutStringOpt.isPresent()) {</span>
<span class="nc" id="L310">        workflowInstance.setConfiguration(watermarkLayoutVariable.get(), layoutStringOpt.get());</span>
      }

<span class="nc" id="L313">      return createResult(mediaPackage, Action.CONTINUE);</span>
<span class="nc" id="L314">    } catch (SeriesException | ThemesServiceDatabaseException | IllegalStateException | IllegalArgumentException</span>
            | IOException e) {
<span class="nc" id="L316">      throw new WorkflowOperationException(e);</span>
    }
  }

  private AbsolutePositionLayoutSpec parseLayout(String watermarkPosition) {
<span class="nc bnc" id="L321" title="All 5 branches missed.">    switch (watermarkPosition) {</span>
      case &quot;topLeft&quot;:
<span class="nc" id="L323">        return new AbsolutePositionLayoutSpec(new AnchorOffset(Anchors.TOP_LEFT, Anchors.TOP_LEFT, offset(20, 20)));</span>
      case &quot;topRight&quot;:
<span class="nc" id="L325">        return new AbsolutePositionLayoutSpec(new AnchorOffset(Anchors.TOP_RIGHT, Anchors.TOP_RIGHT, offset(-20, 20)));</span>
      case &quot;bottomLeft&quot;:
<span class="nc" id="L327">        return new AbsolutePositionLayoutSpec(new AnchorOffset(Anchors.BOTTOM_LEFT, Anchors.BOTTOM_LEFT,</span>
<span class="nc" id="L328">                offset(20, -20)));</span>
      case &quot;bottomRight&quot;:
<span class="nc" id="L330">        return new AbsolutePositionLayoutSpec(new AnchorOffset(Anchors.BOTTOM_RIGHT, Anchors.BOTTOM_RIGHT, offset(-20,</span>
                -20)));
      default:
<span class="nc" id="L333">        throw new IllegalStateException(&quot;Unknown watermark position: &quot; + watermarkPosition);</span>
    }
  }

  private void addElement(MediaPackage mediaPackage, final MediaPackageElementFlavor flavor, final List&lt;String&gt; tags,
          InputStream file, String filename, Type type) throws IOException {
<span class="nc" id="L339">    MediaPackageElement element = elementBuilderFactory.newElementBuilder().newElement(type, flavor);</span>
<span class="nc" id="L340">    element.setIdentifier(UUID.randomUUID().toString());</span>
<span class="nc bnc" id="L341" title="All 2 branches missed.">    for (String tag : tags) {</span>
<span class="nc" id="L342">      element.addTag(tag);</span>
<span class="nc" id="L343">    }</span>
<span class="nc" id="L344">    URI uri = workspace.put(mediaPackage.getIdentifier().toString(), element.getIdentifier(), filename, file);</span>
<span class="nc" id="L345">    element.setURI(uri);</span>
    try {
<span class="nc" id="L347">      MimeType mimeType = MimeTypes.fromString(filename);</span>
<span class="nc" id="L348">      element.setMimeType(mimeType);</span>
<span class="nc" id="L349">    } catch (UnknownFileTypeException e) {</span>
<span class="nc" id="L350">      logger.warn(&quot;Unable to detect the mime type of file {}&quot;, filename);</span>
<span class="nc" id="L351">    }</span>
<span class="nc" id="L352">    mediaPackage.add(element);</span>
<span class="nc" id="L353">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>