<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>JpaJob.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Opencast :: jacoco-reports</a> &gt; <a href="../index.html" class="el_bundle">opencast-common-jpa-impl</a> &gt; <a href="index.source.html" class="el_package">org.opencastproject.job.jpa</a> &gt; <span class="el_source">JpaJob.java</span></div><h1>JpaJob.java</h1><pre class="source lang-java linenums">/*
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 *
 * The Apereo Foundation licenses this file to you under the Educational
 * Community License, Version 2.0 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of the License
 * at:
 *
 *   http://opensource.org/licenses/ecl2.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 */
package org.opencastproject.job.jpa;

import static org.opencastproject.job.api.Job.FailureReason.NONE;

import org.opencastproject.job.api.Job;
import org.opencastproject.job.api.Job.FailureReason;
import org.opencastproject.job.api.Job.Status;
import org.opencastproject.job.api.JobImpl;
import org.opencastproject.security.api.Organization;
import org.opencastproject.security.api.User;
import org.opencastproject.serviceregistry.impl.jpa.ServiceRegistrationJpaImpl;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.net.URI;
import java.util.Date;
import java.util.List;

import javax.persistence.Access;
import javax.persistence.AccessType;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.CollectionTable;
import javax.persistence.Column;
import javax.persistence.ElementCollection;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Index;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.OrderColumn;
import javax.persistence.PostLoad;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;
import javax.persistence.Version;

/**
 * A long running, asynchronously executed job.
 */
@Entity(name = &quot;Job&quot;)
@Access(AccessType.FIELD)
@Table(name = &quot;oc_job&quot;, indexes = {
    @Index(name = &quot;IX_oc_job_parent&quot;, columnList = (&quot;parent&quot;)),
    @Index(name = &quot;IX_oc_job_root&quot;, columnList = (&quot;root&quot;)),
    @Index(name = &quot;IX_oc_job_creator_service&quot;, columnList = (&quot;creator_service&quot;)),
    @Index(name = &quot;IX_oc_job_processor_service&quot;, columnList = (&quot;processor_service&quot;)),
    @Index(name = &quot;IX_oc_job_status&quot;, columnList = (&quot;status&quot;)),
    @Index(name = &quot;IX_oc_job_date_created&quot;, columnList = (&quot;date_created&quot;)),
    @Index(name = &quot;IX_oc_job_date_completed&quot;, columnList = (&quot;date_completed&quot;)),
    @Index(name = &quot;IX_oc_job_dispatchable&quot;, columnList = (&quot;dispatchable&quot;)),
    @Index(name = &quot;IX_oc_job_operation&quot;, columnList = (&quot;operation&quot;)) })
@NamedQueries({
    @NamedQuery(name = &quot;Job&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;where j.status = :status and j.creatorServiceRegistration.serviceType = :serviceType &quot;
        + &quot;order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.type&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;where j.creatorServiceRegistration.serviceType = :serviceType order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.status&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;where j.status = :status order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.statuses&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;where j.status in :statuses order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.countByOrganizationAndHost&quot;,
        query = &quot;SELECT j.organization, j.processorServiceRegistration.hostRegistration.baseUrl, count(j) FROM Job j &quot;
            + &quot;WHERE j.status in :statuses &quot;
            + &quot;GROUP BY j.organization, j.processorServiceRegistration.hostRegistration.baseUrl&quot;),
    @NamedQuery(name = &quot;Job.countTypeByOrganization&quot;,
        query = &quot;SELECT j.organization, count(j) FROM Job j &quot;
            + &quot;WHERE j.operation = :operation and j.status in :statuses &quot;
            + &quot;GROUP BY j.organization&quot;),
    @NamedQuery(name = &quot;Job.all&quot;, query = &quot;SELECT j FROM Job j order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.dispatchable.status&quot;, query = &quot;SELECT j FROM Job j where j.dispatchable = true and &quot;
        + &quot;j.status in :statuses order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.dispatchable.status.idfilter&quot;, query = &quot;SELECT j.id FROM Job j &quot;
        + &quot;WHERE j.dispatchable = true AND j.status IN :statuses AND j.id IN :jobids ORDER BY j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.undispatchable.status&quot;, query = &quot;SELECT j FROM Job j where j.dispatchable = false and &quot;
        + &quot;j.status in :statuses order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.payload&quot;, query = &quot;SELECT j.payload FROM Job j where j.operation = :operation &quot;
        + &quot;order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.processinghost.status&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;where j.status in :statuses and j.processorServiceRegistration is not null and &quot;
        + &quot;j.processorServiceRegistration.serviceType = :serviceType and &quot;
        + &quot;j.processorServiceRegistration.hostRegistration.baseUrl = :host order by j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.root.children&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;WHERE j.rootJob.id = :id ORDER BY j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.children&quot;, query = &quot;SELECT j FROM Job j &quot;
        + &quot;WHERE j.parentJob.id = :id ORDER BY j.dateCreated&quot;),
    @NamedQuery(name = &quot;Job.withoutParent&quot;, query = &quot;SELECT j FROM Job j WHERE j.parentJob IS NULL&quot;),
    @NamedQuery(name = &quot;Job.avgOperation&quot;, query = &quot;SELECT j.operation, AVG(j.runTime), AVG(j.queueTime) &quot;
        + &quot;FROM Job j GROUP BY j.operation&quot;),

    // Job count queries
    @NamedQuery(name = &quot;Job.count&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.status = :status and j.creatorServiceRegistration.serviceType = :serviceType&quot;),
    @NamedQuery(name = &quot;Job.count.all&quot;, query = &quot;SELECT COUNT(j) FROM Job j&quot;),
    @NamedQuery(name = &quot;Job.count.nullType&quot;, query = &quot;SELECT COUNT(j) FROM Job j where j.status = :status&quot;),
    @NamedQuery(name = &quot;Job.count.nullStatus&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.creatorServiceRegistration.serviceType = :serviceType&quot;),
    @NamedQuery(name = &quot;Job.countByHost&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.status = :status and j.processorServiceRegistration is not null and &quot;
        + &quot;j.processorServiceRegistration.serviceType = :serviceType and &quot;
        + &quot;j.creatorServiceRegistration.hostRegistration.baseUrl = :host&quot;),
    @NamedQuery(name = &quot;Job.countByHost.nullType&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.status = :status and j.processorServiceRegistration is not null and &quot;
        + &quot;j.creatorServiceRegistration.hostRegistration.baseUrl = :host&quot;),
    @NamedQuery(name = &quot;Job.countByOperation&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.status = :status and j.operation = :operation and &quot;
        + &quot;j.creatorServiceRegistration.serviceType = :serviceType&quot;),
    @NamedQuery(name = &quot;Job.countByOperationOnly&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.operation = :operation&quot;),
    @NamedQuery(name = &quot;Job.fullMonty&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;where j.status = :status and j.operation = :operation &quot;
        + &quot;and j.processorServiceRegistration is not null and &quot;
        + &quot;j.processorServiceRegistration.serviceType = :serviceType and &quot;
        + &quot;j.creatorServiceRegistration.hostRegistration.baseUrl = :host&quot;),
    @NamedQuery(name = &quot;Job.count.history.failed&quot;, query = &quot;SELECT COUNT(j) FROM Job j &quot;
        + &quot;WHERE j.status = 4 AND j.processorServiceRegistration IS NOT NULL &quot;
        + &quot;AND j.processorServiceRegistration.serviceType = :serviceType &quot;
        + &quot;AND j.processorServiceRegistration.hostRegistration.baseUrl = :host &quot;
        + &quot;AND j.dateCompleted &gt;= j.processorServiceRegistration.stateChanged&quot;),
    @NamedQuery(name = &quot;Job.countPerHostService&quot;, query = &quot;SELECT h.baseUrl, s.serviceType, j.status, count(j) &quot;
        + &quot;FROM Job j, ServiceRegistration s, HostRegistration h &quot;
        + &quot;WHERE ((j.processorServiceRegistration IS NOT NULL AND j.processorServiceRegistration = s) &quot;
        + &quot;OR (j.creatorServiceRegistration IS NOT NULL AND j.creatorServiceRegistration = s)) &quot;
        + &quot;AND s.hostRegistration = h GROUP BY h.baseUrl, s.serviceType, j.status&quot;)
})
public class JpaJob {

  /** The logger */
<span class="fc" id="L159">  private static final Logger logger = LoggerFactory.getLogger(JpaJob.class);</span>

  @Id
  @GeneratedValue
  @Column(name = &quot;id&quot;)
  private long id;

  @Lob
  @Column(name = &quot;creator&quot;, nullable = false, length = 65535)
  private String creator;

  @Column(name = &quot;organization&quot;, nullable = false, length = 128)
  private String organization;

  @Version
  @Column(name = &quot;instance_version&quot;)
  private long version;

  @Column(name = &quot;status&quot;)
  private int status;

  @Column(name = &quot;operation&quot;, length = 128)
  private String operation;

  @Lob
  @Column(name = &quot;argument&quot;, length = 2147483647)
  @OrderColumn(name = &quot;argument_index&quot;)
  @ElementCollection(fetch = FetchType.EAGER)
  @CollectionTable(name = &quot;oc_job_argument&quot;,
      joinColumns = @JoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;id&quot;, nullable = false),
      indexes = {
          @Index(name = &quot;IX_oc_job_argument_id&quot;, columnList = (&quot;id&quot;)),
      }
  )
  private List&lt;String&gt; arguments;

  @Column(name = &quot;date_completed&quot;)
  @Temporal(TemporalType.TIMESTAMP)
  private Date dateCompleted;

  @Column(name = &quot;date_created&quot;)
  @Temporal(TemporalType.TIMESTAMP)
  private Date dateCreated;

  public Date getDateStarted() {
<span class="nc" id="L204">    return dateStarted;</span>
  }

  @Column(name = &quot;date_started&quot;)
  @Temporal(TemporalType.TIMESTAMP)
  private Date dateStarted;

<span class="fc" id="L211">  @Column(name = &quot;queue_time&quot;)</span>
<span class="fc" id="L212">  private Long queueTime = 0L;</span>

<span class="fc" id="L214">  @Column(name = &quot;run_time&quot;)</span>
<span class="fc" id="L215">  private Long runTime = 0L;</span>

  @Lob
  @Basic(fetch = FetchType.LAZY)
  @Column(name = &quot;payload&quot;, length = 16777215)
  private String payload;

<span class="fc" id="L222">  @Column(name = &quot;dispatchable&quot;)</span>
  private boolean dispatchable = true;

<span class="fc" id="L225">  @Column(name = &quot;job_load&quot;, nullable = false)</span>
<span class="fc" id="L226">  private Float jobLoad = 1F;</span>

  @ManyToOne
  @JoinColumn(name = &quot;creator_service&quot;)
  private ServiceRegistrationJpaImpl creatorServiceRegistration;

  @ManyToOne
  @JoinColumn(name = &quot;processor_service&quot;)
  private ServiceRegistrationJpaImpl processorServiceRegistration;

  /**
   * This readonly field provides the raw value of processor_service database table column
   * and is defined for performance reason.
   * Do not use this field in Java!
   * It should only be used by JPQL named queries.
   */
  @Column(name = &quot;processor_service&quot;,  updatable = false, insertable = false)
  private Long processorServiceRegistrationFK;

<span class="fc" id="L245">  @JoinColumn(name = &quot;parent&quot;, referencedColumnName = &quot;id&quot;, nullable = true)</span>
  private JpaJob parentJob = null;

<span class="fc" id="L248">  @OneToOne(fetch = FetchType.LAZY, targetEntity = JpaJob.class, optional = true)</span>
  @JoinColumn(name = &quot;root&quot;, referencedColumnName = &quot;id&quot;, nullable = true)
  private JpaJob rootJob = null;

  @OneToMany(mappedBy = &quot;parentJob&quot;, fetch = FetchType.LAZY, cascade = { CascadeType.PERSIST, CascadeType.REFRESH,
          CascadeType.MERGE })
  private List&lt;JpaJob&gt; childJobs;

  @Transient
  private String createdHost;

  @Transient
  private String processingHost;

<span class="fc" id="L262">  @Transient</span>
  private Long parentJobId = null;

<span class="fc" id="L265">  @Transient</span>
  private Long rootJobId = null;

<span class="fc" id="L268">  @Transient</span>
  private FailureReason failureReason = NONE;

  @Transient
  private String jobType;

  @Transient
  private URI uri;

<span class="fc" id="L277">  public JpaJob() {</span>
<span class="fc" id="L278">  }</span>

  public JpaJob(User currentUser, Organization organization, ServiceRegistrationJpaImpl creatingService,
<span class="fc" id="L281">          String operation, List&lt;String&gt; arguments, String payload, boolean dispatchable, float load) {</span>
<span class="fc" id="L282">    this.creator = currentUser.getUsername();</span>
<span class="fc" id="L283">    this.organization = organization.getId();</span>
<span class="fc" id="L284">    this.creatorServiceRegistration = creatingService;</span>
<span class="fc" id="L285">    this.jobType = creatingService.getServiceType();</span>
<span class="fc" id="L286">    this.operation = operation;</span>
<span class="fc" id="L287">    this.arguments = arguments;</span>
<span class="fc" id="L288">    this.payload = payload;</span>
<span class="fc" id="L289">    this.dispatchable = dispatchable;</span>
<span class="fc" id="L290">    this.jobLoad = load;</span>
<span class="fc" id="L291">    this.status = Status.INSTANTIATED.ordinal();</span>
<span class="fc" id="L292">  }</span>

  public static JpaJob from(Job job) {
<span class="fc" id="L295">    JpaJob newJob = new JpaJob();</span>
<span class="fc" id="L296">    newJob.id = job.getId();</span>
<span class="fc" id="L297">    newJob.dateCompleted = job.getDateCompleted();</span>
<span class="fc" id="L298">    newJob.dateCreated = job.getDateCreated();</span>
<span class="fc" id="L299">    newJob.dateStarted = job.getDateStarted();</span>
<span class="fc" id="L300">    newJob.queueTime = job.getQueueTime();</span>
<span class="fc" id="L301">    newJob.runTime = job.getRunTime();</span>
<span class="fc" id="L302">    newJob.version = job.getVersion();</span>
<span class="fc" id="L303">    newJob.payload = job.getPayload();</span>
<span class="fc" id="L304">    newJob.jobType = job.getJobType();</span>
<span class="fc" id="L305">    newJob.operation = job.getOperation();</span>
<span class="fc" id="L306">    newJob.arguments = job.getArguments();</span>
<span class="fc" id="L307">    newJob.status = job.getStatus().ordinal();</span>
<span class="fc" id="L308">    newJob.parentJobId = job.getParentJobId();</span>
<span class="fc" id="L309">    newJob.rootJobId = job.getRootJobId();</span>
<span class="fc" id="L310">    newJob.dispatchable = job.isDispatchable();</span>
<span class="fc" id="L311">    newJob.uri = job.getUri();</span>
<span class="fc" id="L312">    newJob.creator = job.getCreator();</span>
<span class="fc" id="L313">    newJob.organization = job.getOrganization();</span>
<span class="fc" id="L314">    newJob.jobLoad = job.getJobLoad();</span>
<span class="fc" id="L315">    return newJob;</span>
  }

  public Job toJob() {
<span class="fc" id="L319">    return new JobImpl(id, creator, organization, version, jobType, operation, arguments, Status.values()[status],</span>
            createdHost, processingHost, dateCreated, dateStarted, dateCompleted, queueTime, runTime, payload,
            parentJobId, rootJobId, dispatchable, uri, jobLoad);
  }

  @PostLoad
  public void postLoad() {
<span class="pc bpc" id="L326" title="1 of 2 branches missed.">    if (creatorServiceRegistration == null) {</span>
<span class="nc" id="L327">      logger.warn(&quot;creator service registration for job '{}' is null&quot;, id);</span>
    } else {
<span class="fc" id="L329">      this.createdHost = creatorServiceRegistration.getHost();</span>
<span class="fc" id="L330">      this.jobType = creatorServiceRegistration.getServiceType();</span>
    }

<span class="fc bfc" id="L333" title="All 2 branches covered.">    if (processorServiceRegistration == null) {</span>
<span class="fc" id="L334">      logger.debug(&quot;processor service registration for job '{}' is null&quot;, id);</span>
    } else {
<span class="fc" id="L336">      this.processingHost = processorServiceRegistration.getHost();</span>
<span class="fc" id="L337">      this.jobType = processorServiceRegistration.getServiceType();</span>
    }

<span class="fc bfc" id="L340" title="All 2 branches covered.">    if (rootJob != null) {</span>
<span class="fc" id="L341">      rootJobId = rootJob.id;</span>
    }
<span class="fc bfc" id="L343" title="All 2 branches covered.">    if (parentJob != null) {</span>
<span class="fc" id="L344">      parentJobId = parentJob.id;</span>
    }
<span class="fc" id="L346">  }</span>

  public void setProcessorServiceRegistration(ServiceRegistrationJpaImpl processorServiceRegistration) {
<span class="fc" id="L349">    this.processorServiceRegistration = processorServiceRegistration;</span>
<span class="fc bfc" id="L350" title="All 2 branches covered.">    if (processorServiceRegistration == null) {</span>
<span class="fc" id="L351">      this.processingHost = null;</span>
    } else {
<span class="fc" id="L353">      this.processingHost = processorServiceRegistration.getHost();</span>
    }
<span class="fc" id="L355">  }</span>

  public void setPayload(String payload) {
<span class="fc" id="L358">    this.payload = payload;</span>
<span class="fc" id="L359">  }</span>

  public void setStatus(Status status) {
<span class="fc" id="L362">    this.status = status.ordinal();</span>
<span class="fc" id="L363">  }</span>

  public void setDispatchable(boolean dispatchable) {
<span class="fc" id="L366">    this.dispatchable = dispatchable;</span>
<span class="fc" id="L367">  }</span>

  public void setVersion(long version) {
<span class="fc" id="L370">    this.version = version;</span>
<span class="fc" id="L371">  }</span>

  public void setOperation(String operation) {
<span class="fc" id="L374">    this.operation = operation;</span>
<span class="fc" id="L375">  }</span>

  public void setArguments(List&lt;String&gt; arguments) {
<span class="fc" id="L378">    this.arguments = arguments;</span>
<span class="fc" id="L379">  }</span>

  public void setDateCreated(Date dateCreated) {
<span class="fc" id="L382">    this.dateCreated = dateCreated;</span>
<span class="fc" id="L383">  }</span>

  public void setDateStarted(Date dateStarted) {
<span class="fc" id="L386">    this.dateStarted = dateStarted;</span>
<span class="fc" id="L387">  }</span>

  public void setQueueTime(long queueTime) {
<span class="fc" id="L390">    this.queueTime = queueTime;</span>
<span class="fc" id="L391">  }</span>

  public void setDateCompleted(Date dateCompleted) {
<span class="fc" id="L394">    this.dateCompleted = dateCompleted;</span>
<span class="fc" id="L395">  }</span>

  public void setRunTime(long runTime) {
<span class="fc" id="L398">    this.runTime = runTime;</span>
<span class="fc" id="L399">  }</span>

  public void setParentJob(JpaJob parentJob) {
<span class="fc" id="L402">    this.parentJob = parentJob;</span>
<span class="fc" id="L403">    this.parentJobId = parentJob.id;</span>
<span class="fc" id="L404">  }</span>

  public void setRootJob(JpaJob rootJob) {
<span class="fc" id="L407">    this.rootJob = rootJob;</span>
<span class="fc" id="L408">    this.rootJobId = rootJob.id;</span>
<span class="fc" id="L409">  }</span>

  public void setStatus(Status status, FailureReason failureReason) {
<span class="fc" id="L412">    this.status = status.ordinal();</span>
<span class="fc" id="L413">    this.failureReason = failureReason;</span>
<span class="fc" id="L414">  }</span>

  public void setUri(URI uri) {
<span class="fc" id="L417">    this.uri = uri;</span>
<span class="fc" id="L418">  }</span>

  public long getId() {
<span class="fc" id="L421">    return id;</span>
  }

  public ServiceRegistrationJpaImpl getProcessorServiceRegistration() {
<span class="fc" id="L425">    return processorServiceRegistration;</span>
  }

  public String getJobType() {
<span class="fc" id="L429">    return jobType;</span>
  }

  public String getOperation() {
<span class="fc" id="L433">    return operation;</span>
  }

  public Float getJobLoad() {
<span class="fc" id="L437">    return jobLoad;</span>
  }

  public Status getStatus() {
<span class="fc" id="L441">    return Status.values()[status];</span>
  }

  public boolean isDispatchable() {
<span class="fc" id="L445">    return dispatchable;</span>
  }

  public JpaJob getRootJob() {
<span class="fc" id="L449">    return rootJob;</span>
  }

  public JpaJob getParentJob() {
<span class="fc" id="L453">    return parentJob;</span>
  }

  public List&lt;JpaJob&gt; getChildJobs() {
<span class="fc" id="L457">    return childJobs;</span>
  }

  public String getChildJobsString() {
<span class="nc" id="L461">    StringBuilder sb = new StringBuilder();</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">    for (JpaJob job : getChildJobs()) {</span>
<span class="nc" id="L463">      sb.append(job.getId());</span>
<span class="nc" id="L464">      sb.append(&quot; &quot;);</span>
<span class="nc" id="L465">    }</span>
<span class="nc" id="L466">    return sb.toString();</span>
  }

  public FailureReason getFailureReason() {
<span class="fc" id="L470">    return failureReason;</span>
  }

  public Date getDateCreated() {
<span class="nc" id="L474">    return dateCreated;</span>
  }

  public Date getDateCompleted() {
<span class="nc" id="L478">    return dateCompleted;</span>
  }

  public String getCreator() {
<span class="fc" id="L482">    return creator;</span>
  }

  public String getOrganization() {
<span class="fc" id="L486">    return organization;</span>
  }

  @Override
  public String toString() {
<span class="fc" id="L491">    return String.format(&quot;Job {id:%d, operation:%s, status:%s}&quot;, id, operation, getStatus().toString());</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>